var closet;closet=(()=>{var e={9271:function(e,t){var r,n,o;n=[],void 0===(o="function"==typeof(r=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r="boolean"==typeof(new RegExp).sticky;function isRegExp(e){return e&&"[object RegExp]"===t.call(e)}function isObject(e){return e&&"object"==typeof e&&!isRegExp(e)&&!Array.isArray(e)}function reEscape(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function reGroups(e){return new RegExp("|"+e).exec("").length-1}function reCapture(e){return"("+e+")"}function reUnion(e){return e.length?"(?:"+e.map((function(e){return"(?:"+e+")"})).join("|")+")":"(?!)"}function regexpOrLiteral(e){if("string"==typeof e)return"(?:"+reEscape(e)+")";if(isRegExp(e)){if(e.ignoreCase)throw new Error("RegExp /i flag not allowed");if(e.global)throw new Error("RegExp /g flag is implied");if(e.sticky)throw new Error("RegExp /y flag is implied");if(e.multiline)throw new Error("RegExp /m flag is implied");return e.source}throw new Error("Not a pattern: "+e)}function objectToRules(e){for(var t=Object.getOwnPropertyNames(e),r=[],n=0;n<t.length;n++){var o=t[n],i=e[o],u=[].concat(i);if("include"!==o){var a=[];u.forEach((function(e){isObject(e)?(a.length&&r.push(ruleOptions(o,a)),r.push(ruleOptions(o,e)),a=[]):a.push(e)})),a.length&&r.push(ruleOptions(o,a))}else for(var s=0;s<u.length;s++)r.push({include:u[s]})}return r}function arrayToRules(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n.include)for(var o=[].concat(n.include),i=0;i<o.length;i++)t.push({include:o[i]});else{if(!n.type)throw new Error("Rule has no type: "+JSON.stringify(n));t.push(ruleOptions(n.type,n))}}return t}function ruleOptions(t,r){if(isObject(r)||(r={match:r}),r.include)throw new Error("Matching rules cannot also include states");var n={defaultType:t,lineBreaks:!!r.error||!!r.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var o in r)e.call(r,o)&&(n[o]=r[o]);if("string"==typeof n.type&&t!==n.type)throw new Error("Type transform cannot be a string (type '"+n.type+"' for token '"+t+"')");var i=n.match;return n.match=Array.isArray(i)?i:i?[i]:[],n.match.sort((function(e,t){return isRegExp(e)&&isRegExp(t)?0:isRegExp(t)?-1:isRegExp(e)?1:t.length-e.length})),n}function toRules(e){return Array.isArray(e)?arrayToRules(e):objectToRules(e)}var n=ruleOptions("error",{lineBreaks:!0,shouldThrow:!0});function compileRules(e,t){for(var o=null,i=Object.create(null),u=!0,a=null,s=[],c=[],l=0;l<e.length;l++)e[l].fallback&&(u=!1);for(l=0;l<e.length;l++){var p=e[l];if(p.include)throw new Error("Inheritance is not allowed in stateless lexers");if(p.error||p.fallback){if(o)throw!p.fallback==!o.fallback?new Error("Multiple "+(p.fallback?"fallback":"error")+" rules not allowed (for token '"+p.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+p.defaultType+"')");o=p}var f=p.match.slice();if(u)for(;f.length&&"string"==typeof f[0]&&1===f[0].length;)i[f.shift().charCodeAt(0)]=p;if(p.pop||p.push||p.next){if(!t)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+p.defaultType+"')");if(p.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+p.defaultType+"')")}if(0!==f.length){u=!1,s.push(p);for(var d=0;d<f.length;d++){var h=f[d];if(isRegExp(h))if(null===a)a=h.unicode;else if(a!==h.unicode&&!1===p.fallback)throw new Error("If one rule is /u then all must be")}var y=reUnion(f.map(regexpOrLiteral)),v=new RegExp(y);if(v.test(""))throw new Error("RegExp matches empty string: "+v);if(reGroups(y)>0)throw new Error("RegExp has capture groups: "+v+"\nUse (?: … ) instead");if(!p.lineBreaks&&v.test("\n"))throw new Error("Rule should declare lineBreaks: "+v);c.push(reCapture(y))}}var m=o&&o.fallback,g=r&&!m?"ym":"gm",b=r||m?"":"|";return!0===a&&(g+="u"),{regexp:new RegExp(reUnion(c)+b,g),groups:s,fast:i,error:o||n}}function compile(e){var t=compileRules(toRules(e));return new Lexer({start:t},"start")}function checkStateGroup(e,t,r){var n=e&&(e.push||e.next);if(n&&!r[n])throw new Error("Missing state '"+n+"' (in token '"+e.defaultType+"' of state '"+t+"')");if(e&&e.pop&&1!=+e.pop)throw new Error("pop must be 1 (in token '"+e.defaultType+"' of state '"+t+"')")}function compileStates(e,t){var r=e.$all?toRules(e.$all):[];delete e.$all;var n=Object.getOwnPropertyNames(e);t||(t=n[0]);for(var o=Object.create(null),i=0;i<n.length;i++)o[y=n[i]]=toRules(e[y]).concat(r);for(i=0;i<n.length;i++)for(var u=o[y=n[i]],a=Object.create(null),s=0;s<u.length;s++){var c=u[s];if(c.include){var l=[s,1];if(c.include!==y&&!a[c.include]){a[c.include]=!0;var p=o[c.include];if(!p)throw new Error("Cannot include nonexistent state '"+c.include+"' (in state '"+y+"')");for(var f=0;f<p.length;f++){var d=p[f];-1===u.indexOf(d)&&l.push(d)}}u.splice.apply(u,l),s--}}var h=Object.create(null);for(i=0;i<n.length;i++){var y;h[y=n[i]]=compileRules(o[y],!0)}for(i=0;i<n.length;i++){var v=n[i],m=h[v],g=m.groups;for(s=0;s<g.length;s++)checkStateGroup(g[s],v,h);var b=Object.getOwnPropertyNames(m.fast);for(s=0;s<b.length;s++)checkStateGroup(m.fast[b[s]],v,h)}return new Lexer(h,t)}function keywordTransform(e){for(var t=Object.create(null),r=Object.create(null),n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var i=n[o],u=e[i];(Array.isArray(u)?u:[u]).forEach((function(e){if((r[e.length]=r[e.length]||[]).push(e),"string"!=typeof e)throw new Error("keyword must be string (in keyword '"+i+"')");t[e]=i}))}function str(e){return JSON.stringify(e)}var a="";for(var s in a+="switch (value.length) {\n",r){var c=r[s];a+="case "+s+":\n",a+="switch (value) {\n",c.forEach((function(e){var r=t[e];a+="case "+str(e)+": return "+str(r)+"\n"})),a+="}\n"}return a+="}\n",Function("value",a)}var Lexer=function(e,t){this.startState=t,this.states=e,this.buffer="",this.stack=[],this.reset()};Lexer.prototype.reset=function(e,t){return this.buffer=e||"",this.index=0,this.line=t?t.line:1,this.col=t?t.col:1,this.queuedToken=t?t.queuedToken:null,this.queuedThrow=t?t.queuedThrow:null,this.setState(t?t.state:this.startState),this.stack=t&&t.stack?t.stack.slice():[],this},Lexer.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedThrow:this.queuedThrow}},Lexer.prototype.setState=function(e){if(e&&this.state!==e){this.state=e;var t=this.states[e];this.groups=t.groups,this.error=t.error,this.re=t.regexp,this.fast=t.fast}},Lexer.prototype.popState=function(){this.setState(this.stack.pop())},Lexer.prototype.pushState=function(e){this.stack.push(this.state),this.setState(e)};var o=r?function(e,t){return e.exec(t)}:function(e,t){var r=e.exec(t);return 0===r[0].length?null:r};function tokenToString(){return this.value}if(Lexer.prototype._getGroup=function(e){for(var t=this.groups.length,r=0;r<t;r++)if(void 0!==e[r+1])return this.groups[r];throw new Error("Cannot find token type for matched text")},Lexer.prototype.next=function(){var e=this.index;if(this.queuedGroup){var t=this._token(this.queuedGroup,this.queuedText,e);return this.queuedGroup=null,this.queuedText="",t}var r=this.buffer;if(e!==r.length){if(a=this.fast[r.charCodeAt(e)])return this._token(a,r.charAt(e),e);var n=this.re;n.lastIndex=e;var i=o(n,r),u=this.error;if(null==i)return this._token(u,r.slice(e,r.length),e);var a=this._getGroup(i),s=i[0];return u.fallback&&i.index!==e?(this.queuedGroup=a,this.queuedText=s,this._token(u,r.slice(e,i.index),e)):this._token(a,s,e)}},Lexer.prototype._token=function(e,t,r){var n=0;if(e.lineBreaks){var o=/\n/g,i=1;if("\n"===t)n=1;else for(;o.exec(t);)n++,i=o.lastIndex}var u={type:"function"==typeof e.type&&e.type(t)||e.defaultType,value:"function"==typeof e.value?e.value(t):t,text:t,toString:tokenToString,offset:r,lineBreaks:n,line:this.line,col:this.col},a=t.length;if(this.index+=a,this.line+=n,0!==n?this.col=a-i+1:this.col+=a,e.shouldThrow)throw new Error(this.formatError(u,"invalid syntax"));return e.pop?this.popState():e.push?this.pushState(e.push):e.next&&this.setState(e.next),u},"undefined"!=typeof Symbol&&Symbol.iterator){var LexerIterator=function(e){this.lexer=e};LexerIterator.prototype.next=function(){var e=this.lexer.next();return{value:e,done:!e}},LexerIterator.prototype[Symbol.iterator]=function(){return this},Lexer.prototype[Symbol.iterator]=function(){return new LexerIterator(this)}}return Lexer.prototype.formatError=function(e,t){if(null==e){var r=this.buffer.slice(this.index);e={text:r,offset:this.index,lineBreaks:-1===r.indexOf("\n")?0:1,line:this.line,col:this.col}}var n=Math.max(0,e.offset-e.col+1),o=e.lineBreaks?e.text.indexOf("\n"):e.text.length,i=this.buffer.substring(n,e.offset+o);return t+=" at line "+e.line+" col "+e.col+":\n\n",t+="  "+i+"\n",t+="  "+Array(e.col).join(" ")+"^"},Lexer.prototype.clone=function(){return new Lexer(this.states,this.state)},Lexer.prototype.has=function(e){return!0},{compile,states:compileStates,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:keywordTransform}})?r.apply(t,n):r)||(e.exports=o)},9654:function(e){var t,r;t=this,r=function(){function Rule(e,t,r){return this.id=++Rule.highestId,this.name=e,this.symbols=t,this.postprocess=r,this}function State(e,t,r,n){this.rule=e,this.dot=t,this.reference=r,this.data=[],this.wantedBy=n,this.isComplete=this.dot===e.symbols.length}function Column(e,t){this.grammar=e,this.index=t,this.states=[],this.wants={},this.scannable=[],this.completed={}}function Grammar(e,t){this.rules=e,this.start=t||this.rules[0].name;var r=this.byName={};this.rules.forEach((function(e){r.hasOwnProperty(e.name)||(r[e.name]=[]),r[e.name].push(e)}))}function StreamLexer(){this.reset("")}function Parser(e,t,r){if(e instanceof Grammar){var n=e;r=t}else n=Grammar.fromCompiled(e,t);for(var o in this.grammar=n,this.options={keepHistory:!1,lexer:n.lexer||new StreamLexer},r||{})this.options[o]=r[o];this.lexer=this.options.lexer,this.lexerState=void 0;var i=new Column(n,0);this.table=[i],i.wants[n.start]=[],i.predict(n.start),i.process(),this.current=0}function getSymbolShortDisplay(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return e.toString();if(e.type)return"%"+e.type;if(e.test)return"<"+String(e.test)+">";throw new Error("Unknown symbol type: "+e)}}return Rule.highestId=0,Rule.prototype.toString=function(e){var t=void 0===e?this.symbols.map(getSymbolShortDisplay).join(" "):this.symbols.slice(0,e).map(getSymbolShortDisplay).join(" ")+" ● "+this.symbols.slice(e).map(getSymbolShortDisplay).join(" ");return this.name+" → "+t},State.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},State.prototype.nextState=function(e){var t=new State(this.rule,this.dot+1,this.reference,this.wantedBy);return t.left=this,t.right=e,t.isComplete&&(t.data=t.build(),t.right=void 0),t},State.prototype.build=function(){var e=[],t=this;do{e.push(t.right.data),t=t.left}while(t.left);return e.reverse(),e},State.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,Parser.fail))},Column.prototype.process=function(e){for(var t=this.states,r=this.wants,n=this.completed,o=0;o<t.length;o++){var i=t[o];if(i.isComplete){if(i.finish(),i.data!==Parser.fail){for(var u=i.wantedBy,a=u.length;a--;){var s=u[a];this.complete(s,i)}if(i.reference===this.index){var c=i.rule.name;(this.completed[c]=this.completed[c]||[]).push(i)}}}else{if("string"!=typeof(c=i.rule.symbols[i.dot])){this.scannable.push(i);continue}if(r[c]){if(r[c].push(i),n.hasOwnProperty(c)){var l=n[c];for(a=0;a<l.length;a++){var p=l[a];this.complete(i,p)}}}else r[c]=[i],this.predict(c)}}},Column.prototype.predict=function(e){for(var t=this.grammar.byName[e]||[],r=0;r<t.length;r++){var n=t[r],o=this.wants[e],i=new State(n,0,this.index,o);this.states.push(i)}},Column.prototype.complete=function(e,t){var r=e.nextState(t);this.states.push(r)},Grammar.fromCompiled=function(e,t){var r=e.Lexer;e.ParserStart&&(t=e.ParserStart,e=e.ParserRules);var n=new Grammar(e=e.map((function(e){return new Rule(e.name,e.symbols,e.postprocess)})),t);return n.lexer=r,n},StreamLexer.prototype.reset=function(e,t){this.buffer=e,this.index=0,this.line=t?t.line:1,this.lastLineBreak=t?-t.col:0},StreamLexer.prototype.next=function(){if(this.index<this.buffer.length){var e=this.buffer[this.index++];return"\n"===e&&(this.line+=1,this.lastLineBreak=this.index),{value:e}}},StreamLexer.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},StreamLexer.prototype.formatError=function(e,t){var r=this.buffer;if("string"==typeof r){var n=r.split("\n").slice(Math.max(0,this.line-5),this.line),o=r.indexOf("\n",this.index);-1===o&&(o=r.length);var i=this.index-this.lastLineBreak,u=String(this.line).length;return t+=" at line "+this.line+" col "+i+":\n\n",t+=n.map((function(e,t){return pad(this.line-n.length+t+1,u)+" "+e}),this).join("\n"),t+="\n"+pad("",u+i)+"^\n"}return t+" at index "+(this.index-1);function pad(e,t){var r=String(e);return Array(t-r.length+1).join(" ")+r}},Parser.fail={},Parser.prototype.feed=function(e){var t,r=this.lexer;for(r.reset(e,this.lexerState);;){try{if(!(t=r.next()))break}catch(e){var n=new Column(this.grammar,this.current+1);throw this.table.push(n),(u=new Error(this.reportLexerError(e))).offset=this.current,u.token=e.token,u}var o=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var i=this.current+1;n=new Column(this.grammar,i),this.table.push(n);for(var u,a=void 0!==t.text?t.text:t.value,s=r.constructor===StreamLexer?t.value:t,c=o.scannable,l=c.length;l--;){var p=c[l],f=p.rule.symbols[p.dot];if(f.test?f.test(s):f.type?f.type===t.type:f.literal===a){var d=p.nextState({data:s,token:t,isToken:!0,reference:i-1});n.states.push(d)}}if(n.process(),0===n.states.length)throw(u=new Error(this.reportError(t))).offset=this.current,u.token=t,u;this.options.keepHistory&&(o.lexerState=r.save()),this.current++}return o&&(this.lexerState=r.save()),this.results=this.finish(),this},Parser.prototype.reportLexerError=function(e){var t,r,n=e.token;return n?(t="input "+JSON.stringify(n.text[0])+" (lexer error)",r=this.lexer.formatError(n,"Syntax error")):(t="input (lexer error)",r=e.message),this.reportErrorCommon(r,t)},Parser.prototype.reportError=function(e){var t=(e.type?e.type+" token: ":"")+JSON.stringify(void 0!==e.value?e.value:e),r=this.lexer.formatError(e,"Syntax error");return this.reportErrorCommon(r,t)},Parser.prototype.reportErrorCommon=function(e,t){var r=[];r.push(e);var n=this.table.length-2,o=this.table[n],i=o.states.filter((function(e){var t=e.rule.symbols[e.dot];return t&&"string"!=typeof t}));return 0===i.length?(r.push("Unexpected "+t+". I did not expect any more input. Here is the state of my parse table:\n"),this.displayStateStack(o.states,r)):(r.push("Unexpected "+t+". Instead, I was expecting to see one of the following:\n"),i.map((function(e){return this.buildFirstStateStack(e,[])||[e]}),this).forEach((function(e){var t=e[0],n=t.rule.symbols[t.dot],o=this.getSymbolDisplay(n);r.push("A "+o+" based on:"),this.displayStateStack(e,r)}),this)),r.push(""),r.join("\n")},Parser.prototype.displayStateStack=function(e,t){for(var r,n=0,o=0;o<e.length;o++){var i=e[o],u=i.rule.toString(i.dot);u===r?n++:(n>0&&t.push("    ^ "+n+" more lines identical to this"),n=0,t.push("    "+u)),r=u}},Parser.prototype.getSymbolDisplay=function(e){return function getSymbolLongDisplay(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return"character matching "+e;if(e.type)return e.type+" token";if(e.test)return"token matching "+String(e.test);throw new Error("Unknown symbol type: "+e)}}(e)},Parser.prototype.buildFirstStateStack=function(e,t){if(-1!==t.indexOf(e))return null;if(0===e.wantedBy.length)return[e];var r=e.wantedBy[0],n=[e].concat(t),o=this.buildFirstStateStack(r,n);return null===o?null:[e].concat(o)},Parser.prototype.save=function(){var e=this.table[this.current];return e.lexerState=this.lexerState,e},Parser.prototype.restore=function(e){var t=e.index;this.current=t,this.table[t]=e,this.table.splice(t+1),this.lexerState=e.lexerState,this.results=this.finish()},Parser.prototype.rewind=function(e){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[e])},Parser.prototype.finish=function(){var e=[],t=this.grammar.start;return this.table[this.table.length-1].states.forEach((function(r){r.rule.name===t&&r.dot===r.rule.symbols.length&&0===r.reference&&r.data!==Parser.fail&&e.push(r)})),e.map((function(e){return e.data}))},{Parser,Grammar,Rule}},e.exports?e.exports=r():t.nearley=r()},8492:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8412);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}}),Object.defineProperty(t,"versionInfo",{enumerable:!0,get:function(){return n.versionInfo}}),Object.defineProperty(t,"prereleaseInfo",{enumerable:!0,get:function(){return n.prereleaseInfo}});var o=r(2147);Object.defineProperty(t,"Template",{enumerable:!0,get:function(){return o.Template}});var i=r(205);Object.defineProperty(t,"BrowserTemplate",{enumerable:!0,get:function(){return i.BrowserTemplate}});var u=r(3607);Object.defineProperty(t,"FilterManager",{enumerable:!0,get:function(){return u.FilterManager}});var a=r(5887);Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return a.Parser}});var s=r(2939);Object.defineProperty(t,"keyPattern",{enumerable:!0,get:function(){return s.keyPattern}}),Object.defineProperty(t,"keySeparationPattern",{enumerable:!0,get:function(){return s.keySeparationPattern}}),Object.defineProperty(t,"unicodeLetterPattern",{enumerable:!0,get:function(){return s.unicodeLetterPattern}}),Object.defineProperty(t,"unicodeNumberPattern",{enumerable:!0,get:function(){return s.unicodeNumberPattern}}),Object.defineProperty(t,"unicodeAlphanumericPattern",{enumerable:!0,get:function(){return s.unicodeAlphanumericPattern}});var c=r(8358);Object.defineProperty(t,"Stylizer",{enumerable:!0,get:function(){return c.Stylizer}});var l=r(7915);Object.defineProperty(t,"parseTagSelector",{enumerable:!0,get:function(){return l.parseTagSelector}});var p=r(389);Object.defineProperty(t,"recipes",{enumerable:!0,get:function(){return p.recipes}}),Object.defineProperty(t,"wrappers",{enumerable:!0,get:function(){return p.wrappers}}),Object.defineProperty(t,"deciders",{enumerable:!0,get:function(){return p.deciders}}),Object.defineProperty(t,"sequencers",{enumerable:!0,get:function(){return p.sequencers}});var f=r(4489);Object.defineProperty(t,"browser",{enumerable:!0,get:function(){return f.browser}}),t.anki=r(9120)},9120:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQaChildNodes=t.persistenceInterface=t.preset=void 0;var n=r(205);t.preset=function(e,t,r){return{card:e,cardNumber:(n=e,Number(n.match(/[0-9]*$/))),tagsFull:t,tags:0===t.length?[]:t.split(" "),side:r};var n};t.persistenceInterface=function(e){return function(t){var r,n=null!==(r=globalThis.Persistence)&&void 0!==r?r:null,o=function(){if(n&&n.isAvailable()&&("back"===e||!function(){try{if("object"==typeof globalThis.sessionStorage)return!0}catch(e){return!1}return!1}())){var r=n.getItem(t);return new Map(r)}return new Map}();return{key:t,map:o,writeBack:function(){if(n&&n.isAvailable()){var e=Array.from(o.entries());n.setItem(t,e)}}}}},t.getQaChildNodes=function(){if(!window.document)return null;var e=window.document.getElementById("qa");return e?n.interspliceChildNodes(e,{type:"predicate",value:function(e){return"STYLE"!==e.tagName&&"SCRIPT"!==e.tagName&&"anki-am"!==e.id}}):null}},205:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserTemplate=t.interspliceChildNodes=t.ChildNodeSpan=void 0;var s=r(2147),parseIndexArgument=function(e,t,r){return e<0?r+e+1:t+e},getText=function(e,t){var r;if("string"==typeof e)return e;var n=null;switch(e.nodeType){case Node.TEXT_NODE:return null!==(r=e.textContent)&&void 0!==r?r:"";case Node.ELEMENT_NODE:return n=e,t?n.outerHTML:n.innerHTML;case p.CHILD_NODE_SPAN:return e.spanAsStrings().join("");default:return""}},c={type:"index",value:0},l={type:"index",value:-1},p=function(){function ChildNodeSpan(e,t,r){var n,o,i,u;void 0===t&&(t=c),void 0===r&&(r=l),this.nodeType=ChildNodeSpan.CHILD_NODE_SPAN,this.parentElement=e,this.childNodes=Array.from(this.parentElement.childNodes),this.max=e.childNodes.length-1;var a=this.getFromMethod(t.type),s=this.getToMethod(r.type);this._fromIndex=a.call(this,t.value,null!==(n=t.startAtIndex)&&void 0!==n?n:0,null!==(o=t.exclusive)&&void 0!==o&&o),this._toIndex=s.call(this,r.value,Math.max(null!==(i=r.startAtIndex)&&void 0!==i?i:0,this.from),null!==(u=r.exclusive)&&void 0!==u&&u)}return Object.defineProperty(ChildNodeSpan.prototype,"from",{get:function(){return this._fromIndex},enumerable:!1,configurable:!0}),Object.defineProperty(ChildNodeSpan.prototype,"to",{get:function(){return this._toIndex},enumerable:!1,configurable:!0}),ChildNodeSpan.prototype.getFromMethod=function(e){return"index"===e?this.fromIndex:"node"===e?this.fromNode:this.fromPredicate},ChildNodeSpan.prototype.getToMethod=function(e){return"index"===e?this.toIndex:"node"===e?this.toNode:this.toPredicate},ChildNodeSpan.prototype.fromSafe=function(e,t){return e<t||e>this.max?this.max:e},ChildNodeSpan.prototype.fromIndex=function(e,t,r){var n=parseIndexArgument(e,t,this.max)+(r?1:0);return this.fromSafe(n,t)},ChildNodeSpan.prototype.fromNode=function(e,t,r){var n=this.childNodes.slice(t).findIndex((function(t){return t===e}))+t+(r?1:0);return this.fromSafe(n,t)},ChildNodeSpan.prototype.fromPredicate=function(e,t,r){var n=this.childNodes.slice(t).findIndex(e)+t+(r?1:0);return this.fromSafe(n,t)},ChildNodeSpan.prototype.toSafe=function(e,t){return e<t||e>this.max?0:e},ChildNodeSpan.prototype.toIndex=function(e,t,r){var n=parseIndexArgument(e,t,this.max)-(r?1:0);return this.toSafe(n,t)},ChildNodeSpan.prototype.toNode=function(e,t,r){var n=this.childNodes.slice(t).findIndex((function(t){return t===e}))+t-(r?1:0);return this.toSafe(n,t)},ChildNodeSpan.prototype.toPredicate=function(e,t,r){var n=this.childNodes.slice(t).findIndex(e)+t-(r?1:0);return this.toSafe(n,t)},Object.defineProperty(ChildNodeSpan.prototype,"valid",{get:function(){return this._fromIndex<=this._toIndex},enumerable:!1,configurable:!0}),Object.defineProperty(ChildNodeSpan.prototype,"length",{get:function(){return Math.max(0,this._toIndex-this._fromIndex+1)},enumerable:!1,configurable:!0}),ChildNodeSpan.prototype.span=function(){return this.valid?this.childNodes.slice(this._fromIndex,this._toIndex+1):[]},ChildNodeSpan.prototype.spanAsStrings=function(){return this.span().map((function(e){return getText(e,!0)}))},ChildNodeSpan.prototype.replaceSpan=function(e){var t,r;if(this.valid){var n=document.createElement("div"),o=this.parentElement.childNodes.length;this.parentElement.insertBefore(n,this.parentElement.childNodes[this._fromIndex]);try{for(var u=i(this.span()),a=u.next();!a.done;a=u.next()){var s=a.value;this.parentElement.removeChild(s)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}n.outerHTML=e,this.childNodes=Array.from(this.parentElement.childNodes),this.max=this.childNodes.length,this._toIndex=this._toIndex+(this.max-o)}},ChildNodeSpan.CHILD_NODE_SPAN=3353,ChildNodeSpan}();t.ChildNodeSpan=p;var makePositions=function(e,t){return void 0===t&&(t=0),[{type:"predicate",value:e.value,startAtIndex:t,exclusive:!1},{type:"predicate",value:function(t){return!e.value(t)},startAtIndex:t,exclusive:!0}]};t.interspliceChildNodes=function(e,t){for(var r=[],n=new(p.bind.apply(p,a([void 0,e],makePositions(t))));n.valid;)r.push(n),n=new(p.bind.apply(p,a([void 0,e],makePositions(t,n.to+1))));return r};var f=function(e){function BrowserTemplate(t,r,n){var o=e.call(this,t,r)||this;return o.inputs=n,o}return o(BrowserTemplate,e),BrowserTemplate.prototype.renderToNodes=function(t){var r=this;e.prototype.render.call(this,t,(function(e){return e.forEach((function(e,t){return function(e,t){if("string"!=typeof e){var r=null,n=null;switch(e.nodeType){case Node.TEXT_NODE:r=e,n=document.createElement("div"),r.parentElement&&(r.parentElement.insertBefore(n,r),r.parentElement.removeChild(r)),n.outerHTML=t;break;case Node.ELEMENT_NODE:e.innerHTML=t;break;case p.CHILD_NODE_SPAN:e.replaceSpan(t)}}}(r.inputs[t],e)}))}))},BrowserTemplate.makeFromNode=function(e){return new BrowserTemplate([getText(e,!1)],null,[e])},BrowserTemplate.makeFromNodes=function(e){return new BrowserTemplate(e.map((function(e){return getText(e,!1)})),null,e)},BrowserTemplate}(s.Template);t.BrowserTemplate=f},2257:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.DeferredApi=void 0;var u=r(3537),a={priority:0,persistent:!1},deferredComparator=function(e,t){return e.priority>t.priority},s=function(){function DeferredApi(){this._deferred=new Map,this._blocked=new Set}return DeferredApi.prototype.register=function(e,t,r){var n,o;void 0===r&&(r=a),this._deferred.set(e,{keyword:e,procedure:t,priority:null!==(n=r.priority)&&void 0!==n?n:a.priority,persistent:null!==(o=r.persistent)&&void 0!==o?o:a.persistent})},DeferredApi.prototype.registerIfNotExists=function(e,t,r){void 0===r&&(r=a),this.isRegistered(e)||this.register(e,t,r)},DeferredApi.prototype.unregister=function(e){this._deferred.delete(e)},DeferredApi.prototype.isRegistered=function(e){return this._deferred.has(e)},DeferredApi.prototype.block=function(e){this._blocked.add(e)},DeferredApi.prototype.unblock=function(e){this._blocked.delete(e)},DeferredApi.prototype.isBlocked=function(e){return this._blocked.has(e)},DeferredApi.prototype.clear=function(){this._deferred.clear(),this._blocked.clear()},DeferredApi.prototype.executeEach=function(e){var t,r,n=new u.PriorityQueue(deferredComparator);n.push.apply(n,o(this._deferred.values()));try{for(var a=i(n.generate()),s=a.next();!s.done;s=a.next()){var c=s.value;this.isBlocked(c.keyword)||c.procedure(c,e),c.persistent||this.unregister(c.keyword)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}this._blocked.clear()},DeferredApi}();t.DeferredApi=s},5463:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterApi=void 0;var wrapWithBool=function(e,t){return{ready:t,result:e,containsTags:!1}},defaultFilter=function(e,t){return r=e.representation,n=t.ready,wrapWithBool(r,n);var r,n},r={ready:!1,result:"",containsTags:!1},standardizeFilterResult=function(e){var t,n,o;switch(typeof e){case"string":return wrapWithBool(e,!0);case"object":return{ready:null===(t=e.ready)||void 0===t||t,result:null!==(n=e.result)&&void 0!==n?n:"",containsTags:null!==(o=e.containsTags)&&void 0!==o&&o};default:return r}},n=function(){function FilterApi(){this.filters=new Map}return FilterApi.prototype.register=function(e,t){this.filters.set(e,t)},FilterApi.prototype.has=function(e){return this.filters.has(e)},FilterApi.prototype.get=function(e){var t;return null!==(t=this.filters.get(e))&&void 0!==t?t:null},FilterApi.prototype.getOrDefault=function(e){var t;return null!==(t=this.get(e))&&void 0!==t?t:defaultFilter},FilterApi.prototype.unregisterFilter=function(e){this.filters.delete(e)},FilterApi.prototype.clearFilters=function(){this.filters.clear()},FilterApi.prototype.execute=function(e,t,r){var n=this.getOrDefault(e);return standardizeFilterResult(n(t,r))},FilterApi}();t.FilterApi=n},3634:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.MetaFilterManager=void 0;var o=r(2093),i=function(){function MetaFilterManager(e,t,r,n,i,u,a,s){this.preset=e,this.filters=t,this.options=r,this.registrar=new o.RegistrarApi(t,r),this.deferred=n,this.aftermath=i,this.cache=u,this.memory=a,this.environment=s}return MetaFilterManager.prototype.getBaseInternals=function(e){return Object.assign({},{filters:this.filters,options:this.options,registrar:this.registrar,cache:this.cache,memory:this.memory,environment:this.environment,deferred:this.deferred,aftermath:this.aftermath,preset:this.preset},e)},MetaFilterManager.prototype.getAftermathInternals=function(e,t){return Object.assign(this.getBaseInternals(e),t)},MetaFilterManager.prototype.getDeferredInternals=function(e,t){return Object.assign(this.getBaseInternals(e),t)},MetaFilterManager.prototype.getInternals=function(e,t,r){return Object.assign(this.getDeferredInternals(e,t),r)},MetaFilterManager.prototype.filterAccessor=function(e,t){var r=this;return{getProcessor:function(n){return{execute:function(o,i){return r.filters.execute(n,o,r.getInternals(e,t,i))},getOptions:function(){return r.options.get(n,{})}}}}},MetaFilterManager.prototype.executeDeferred=function(e,t){var r=this.getDeferredInternals(e,t);this.deferred.executeEach(r)},MetaFilterManager.prototype.executeAftermath=function(e,t){var r=this.getAftermathInternals(e,t);this.aftermath.executeEach(r)},MetaFilterManager.prototype.switchPreset=function(e){this.preset=e},MetaFilterManager.prototype.clear=function(){this.memory.clear(),this.aftermath.clear()},MetaFilterManager.prototype.reset=function(){this.cache.clear(),this.deferred.clear()},MetaFilterManager.prototype.install=function(){for(var e,t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];try{for(var i=n(r),u=i.next();!u.done;u=i.next()){var a=u.value;a(this.registrar)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},MetaFilterManager}();t.MetaFilterManager=i},3537:function(e,t){"use strict";var r=this&&this.__generator||function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.PriorityQueue=void 0;var parent=function(e){return(e+1>>>1)-1},left=function(e){return 1+(e<<1)},right=function(e){return e+1<<1},o=function(){function PriorityQueue(e){this._heap=[],this._comparator=e}return PriorityQueue.prototype.greater=function(e,t){return this._comparator(this._heap[e],this._heap[t])},PriorityQueue.prototype.swap=function(e,t){var r;r=n([this._heap[t],this._heap[e]],2),this._heap[e]=r[0],this._heap[t]=r[1]},PriorityQueue.prototype.siftUp=function(){for(var e=this.size()-1;e>0&&this.greater(e,parent(e));)this.swap(e,parent(e)),e=parent(e)},PriorityQueue.prototype.siftDown=function(){for(var e=0;left(e)<this.size()&&this.greater(left(e),e)||right(e)<this.size()&&this.greater(right(e),e);){var t=right(e)<this.size()&&this.greater(right(e),left(e))?right(e):left(e);this.swap(e,t),e=t}},PriorityQueue.prototype.size=function(){return this._heap.length},PriorityQueue.prototype.isEmpty=function(){return 0===this.size()},PriorityQueue.prototype.peek=function(){return this._heap[0]},PriorityQueue.prototype.push=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.forEach((function(t){e._heap.push(t),e.siftUp()})),this.size()},PriorityQueue.prototype.pop=function(){var e=this.peek(),t=this.size()-1;return t>0&&this.swap(0,t),this._heap.pop(),this.siftDown(),e},PriorityQueue.prototype.generate=function(){var e;return r(this,(function(t){switch(t.label){case 0:e=this.pop(),t.label=1;case 1:return e?[4,e]:[3,3];case 2:return t.sent(),e=this.pop(),[3,1];case 3:return[2,null]}}))},PriorityQueue}();t.PriorityQueue=o},2093:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegistrarApi=void 0;var r=function(){function RegistrarApi(e,t){this.filters=e,this.options=t}return RegistrarApi.prototype.register=function(e,t,r){void 0===r&&(r={}),this.filters.register(e,t),this.options.set(e,r)},RegistrarApi.prototype.getOptions=function(e){return this.options.get(e,{})},RegistrarApi}();t.RegistrarApi=r},9983:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0;var r=function(){function Storage(e){this.storage=e}return Storage.prototype.set=function(e,t){this.storage.set(e,t)},Storage.prototype.get=function(e,t){var r;return null!==(r=this.storage.get(e))&&void 0!==r?r:t},Storage.prototype.has=function(e){return this.storage.has(e)},Storage.prototype.fold=function(e,t,r){var n=t(this.get(e,r));return this.set(e,n),n},Storage.prototype.post=function(e,t,r){var n=this.get(e,r);return this.set(e,t(n)),n},Storage.prototype.lazy=function(e,t){var r;return null!==(r=this.get(e,null))&&void 0!==r?r:this.fold(e,t,null)},Storage.prototype.over=function(e,t,r){var n=this.get(e,r);return this.set(e,n),t(n)},Storage.prototype.delete=function(e){this.storage.delete(e)},Storage.prototype.clear=function(){this.storage.clear()},Storage}();t.Storage=r},3607:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.FilterManager=void 0;var i=r(3634),u=r(5463),a=r(9983),s=r(2257),c=r(2496),l="_closetEnvironment",p=function(e){function FilterManager(){return null!==e&&e.apply(this,arguments)||this}return o(FilterManager,e),FilterManager.make=function(e,t){void 0===e&&(e={}),void 0===t&&(t=new Map);var r=Object.prototype.hasOwnProperty.call(globalThis,l)?globalThis._closetEnvironment:globalThis._closetEnvironment=new Map;return new FilterManager(e,new u.FilterApi,new a.Storage(new Map),new s.DeferredApi,new s.DeferredApi,new a.Storage(new Map),new a.Storage(t),new a.Storage(r))},FilterManager.prototype.makeAccessor=function(t,r){var n=this,o=this.filterAccessor(t,r);return function(i){var u=o.getProcessor(i);return{execute:function(o,i){return{status:(a=u.execute(o,e.prototype.getInternals.call(n,t,r,i))).containsTags?a.ready?c.Status.ContinueTags:c.Status.ContainsTags:a.ready?c.Status.Ready:c.Status.NotReady,result:a.result};var a},getOptions:function(){return e=u.getOptions(),{separators:null!==(t=e.separators)&&void 0!==t?t:[],capture:null!==(r=e.capture)&&void 0!==r&&r};var e,t,r}}}},FilterManager.prototype.finishIteration=function(e,t){this.executeDeferred(e,t)},FilterManager.prototype.finishRun=function(e,t){this.executeAftermath(e,t),this.reset()},FilterManager}(i.MetaFilterManager);t.FilterManager=p},4489:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browser=void 0;var n=r(7282),o=r(3662),i=r(1740),u=r(8281),a={occlusionEditor:i.occlusionMakerRecipe,rect:n.prepareFlashcardRecipes(u.rectRecipes)};t.browser={appendStyleTag:o.appendStyleTag,recipes:a}},9551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupMenu=t.enableAsMenuTrigger=t.menuCss=void 0;var n=r(3086);t.menuCss="\n:root {\n  --cm-niceblue: #3f8cf1;\n  --cm-nicegray: #444;\n  --cm-backgray: #ececec;\n  --cm-boxgray: #cfcfcf;\n}\n\nnav.context-menu {\n  position: absolute;\n  z-index: 9999;\n  display: none;\n}\n\nnav.context-menu--active {\n  display: block;\n}\n\n/******************** UL */\n\nnav.context-menu ul {\n  position: absolute;\n\n  padding: 0.2rem 0;\n  width: 10rem;\n\n  white-space: nowrap;\n  list-style: none;\n\n  background-color: var(--cm-backgray);\n  border: solid 1px var(--cm-boxgray);\n  box-shadow: 1px 1px 2px var(--cm-boxgray);\n}\n\n/******************** LI */\n\nnav.context-menu li {\n  margin-bottom: 2px;\n}\n\nnav.context-menu li.context-menu--hover {\n  background-color: var(--cm-niceblue);\n}\n\nnav.context-menu li:last-child {\n  margin-bottom: 0;\n}\n\nnav.context-menu li ul {\n  display: none;\n  margin-left: 2rem;\n}\n\nnav.context-menu li.context-menu--hover ul {\n  display: block;\n}\n\nnav.context-menu li li ul {\n  display: none;\n  margin-left: 4rem;\n}\n\nnav.context-menu li li.context-menu--hover ul {\n  display: block;\n}\n\n/******************** A */\n\nnav.context-menu a {\n  display: block;\n  padding: 0.3rem 1rem;\n  user-select: none;\n\n  color: var(--cm-nicegray);\n}\n\nnav.context-menu li.context-menu--hover a {\n  color: white;\n}\n";var turnOffMenu=function(e){return function(t){e.classList.remove("context-menu--active")}};t.enableAsMenuTrigger=function(e,t){var r=turnOffMenu(e);t.addEventListener("contextmenu",(function(t){t.preventDefault(),t.stopPropagation(),document.querySelectorAll(".context-menu--active").forEach((function(e){return e.classList.remove("context-menu--active")})),e.classList.add("context-menu--active"),window.addEventListener("click",r,{once:!0}),function(e,t,r){e.style.left=t+"px",e.style.top=r+"px"}(e,t.pageX,t.pageY)}))},t.setupMenu=function(e,t){var r=n.constructMenu(e,t);return document.body.insertAdjacentElement("beforeend",r),function(e){e.addEventListener("click",(function(e){e.stopPropagation()})),e.querySelectorAll("li").forEach((function(t){t.addEventListener("mouseenter",(function(){t.classList.add("context-menu--hover")})),t.addEventListener("mouseleave",(function(){t.classList.remove("context-menu--hover")})),t.addEventListener("click",(function(t){turnOffMenu(e)(t)}))}))}(r),r}},3086:function(e,t){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.constructMenu=void 0;var processMenuItem=function(e){var t=document.createElement("li"),r=document.createElement("a");return r.innerText=e.label,r.id=e.itemId,r.classList.add("context-menu-item"),e.clickEvent&&r.addEventListener("click",e.clickEvent),t.appendChild(r),e.sub&&e.sub.length>0&&t.appendChild(processMenuItems(e.sub)),t},processMenuItems=function(e){var t,n,o=document.createElement("ul"),i=e.map(processMenuItem);try{for(var u=r(i),a=u.next();!a.done;a=u.next()){var s=a.value;o.appendChild(s)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o};t.constructMenu=function(e,t){var r=document.createElement("nav");return r.classList.add("context-menu"),r.id=e,r.appendChild(processMenuItems(t)),r}},3560:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.adaptCursor=t.getResizeParameters=t.onMouseMoveMove=t.onMouseMoveResize=void 0;var o=r(3662);t.onMouseMoveResize=function(e,t,r,i,u,a,s,c){return function(l){var p=n(e(o.getOffsets(l)),2),f=p[0],d=p[1];r&&f<s?(t.x=f,t.width=s-f):i&&(t.x=s,t.width=f-s),u&&d<c?(t.y=d,t.height=c-d):a&&(t.y=c,t.height=d-c)}},t.onMouseMoveMove=function(e,t,r,i,u,a){return function(s){var c=n(e(o.getOffsets(s)),2),l=c[0],p=c[1],f=r+(l-u),d=i+(p-a);t.x=f,t.y=d}};var perDirection=function(e,t,r,o,i,u,a,s,c){return function(l,p,f){var d=n(l.scaled,4),h=d[0],y=d[1],v=h+d[2]-p,m=f-y,g=y+d[3]-f;return p-h<=5?m<=5?e(l):g<=5?t(l):r(l):v<=5?m<=5?o(l):g<=5?i(l):u(l):m<=5?a(l):g<=5?s(l):c(l)}};t.getResizeParameters=perDirection((function(e){return[!0,!1,!0,!1,e.x+e.width,e.y+e.height]}),(function(e){return[!0,!1,!1,!0,e.x+e.width,e.y]}),(function(e){return[!0,!1,!1,!1,e.x+e.width,0]}),(function(e){return[!1,!0,!0,!1,e.x,e.y+e.height]}),(function(e){return[!1,!0,!1,!0,e.x,e.y]}),(function(e){return[!1,!0,!1,!1,e.x,0]}),(function(e){return[!1,!1,!0,!1,0,e.y+e.height]}),(function(e){return[!1,!1,!1,!0,0,e.y]}),(function(){return[!1,!1,!1,!1,0,0]}));var i=perDirection((function(){return"nwse-resize"}),(function(){return"nesw-resize"}),(function(){return"ew-resize"}),(function(){return"nesw-resize"}),(function(){return"nwse-resize"}),(function(){return"ew-resize"}),(function(){return"ns-resize"}),(function(){return"ns-resize"}),(function(){return"move"}));t.adaptCursor=function(e,t){return function(r){if(r.shiftKey)t.rect.style.cursor="no-drop";else{var u=n(e(o.getOffsets(r)),2),a=u[0],s=u[1],c=i(t,a,s);t.rect.style.cursor=c}}}},1740:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.occlusionMakerRecipe=t.wrapForOcclusion=void 0;var u=r(2939),a=r(9031),s=r(3560),c=r(171),l=r(3662),p=r(9551),f=r(8281),makeInteractive=function(e,t){var r=c.reverseEffects(window.getComputedStyle(e.image));t.rect.addEventListener("mousemove",s.adaptCursor(r,t));var n=p.setupMenu("occlusion-shape-menu",[{label:"Change Label",itemId:"change-label",clickEvent:function(){var e=prompt("Specify the new label",t.labelText);"string"==typeof e&&(t.labelText=e)}},{label:"Close Menu",itemId:"close-occlusion-menu"}]);p.enableAsMenuTrigger(n,t.rect),e.append(t)},occlusionLeftClick=function(e,t){t.preventDefault(),"svg"!==t.target.nodeName?function(e,t){var r=a.Rect.wrap(t.target);if(t.shiftKey)e.remove(r);else{var i=c.reverseEffects(window.getComputedStyle(e.image)),u=n(i(l.getOffsets(t)),2),p=u[0],f=u[1],d=s.getResizeParameters(r,p,f),h=d.includes(!0)?s.onMouseMoveResize.apply(void 0,o([i,r],d)):s.onMouseMoveMove(i,r,r.x,r.y,p,f);e.svg.addEventListener("mousemove",h),e.svg.addEventListener("mouseup",(function(t){t.preventDefault(),e.svg.removeEventListener("mousemove",h)}),{once:!0})}}(e,t):function(e,t){var r=c.reverseEffects(window.getComputedStyle(e.image)),o=n(r(l.getOffsets(t)),2),i=o[0],u=o[1],p=a.Rect.make(),f=e.getLabels(),d=Math.max(1,l.getHighestNum(f)+(t.altKey?0:1));p.labelText="rect"+d,p.pos=[i,u,0,0],makeInteractive(e,p);var h=s.onMouseMoveResize(r,p,!0,!0,!0,!0,i,u);e.svg.addEventListener("mousemove",h),e.svg.addEventListener("mouseup",(function(){e.svg.removeEventListener("mousemove",h),p.readjust(e)}))}(e,t)};t.wrapForOcclusion=function(e,t){e.svg.addEventListener("mousedown",(function(t){0===t.button&&occlusionLeftClick(e,t)}));var r=p.setupMenu("occlusion-menu",[{label:"Accept occlusions",itemId:"occlusion-accept",clickEvent:function(r){r.preventDefault(),t(e.getElements(),e)}},{label:"Close Menu",itemId:"close-occlusion-menu"}]);p.enableAsMenuTrigger(r,e.svg)};var defaultAcceptHandler=function(e){return navigator.clipboard.writeText(e.map((function(e){return e.toText()})).join("\n"))};t.occlusionMakerRecipe=function(e){return void 0===e&&(e={}),function(r){var s="makeOcclusions",c=e.tagname,d=void 0===c?s:c,h=e.acceptHandler,y=void 0===h?defaultAcceptHandler:h,v=e.existingShapesFilter,m=void 0===v?u.id:v,g=e.shapeKeywords,b=void 0===g?[f.rectKeyword]:g;r.register(d,(function(e,r){var u=r.template.textFragments.flatMap(l.getImages);return r.aftermath.registerIfNotExists(s,(function(){var e,s,c,f;r.environment.post("occlusionMakerCss",(function(){return!0}),!1)||(l.appendStyleTag(p.menuCss),l.appendStyleTag("\n.closet__occlusion-container {\n  outline: 3px dotted hotpink;\n}")),r.environment.post(l.svgKeyword,(function(){return!0}),!1)||l.appendStyleTag(l.svgCss);var d=[];try{for(var h=i(b),v=h.next();!v.done;v=h.next()){var g=v.value,S=r.cache.get(g,[]);d.push.apply(d,o(S)),r.aftermath.block(g)}}catch(t){e={error:t}}finally{try{v&&!v.done&&(s=h.return)&&s.call(h)}finally{if(e)throw e.error}}var callback=function(e){var r,o,u,s=a.SVG.wrapImage(e.target);try{for(var c=i(m(d,s)),l=c.next();!l.done;l=c.next()){var p=n(l.value),f=p[0],h=p.slice(2),v=null,g=null,b=null,S=null,A=null,x=null;switch(f){case"rect":v=(u=n(h,5))[0],g=u[1],b=u[2],S=u[3],A=u[4],(x=a.Rect.make(s)).labelText=v,x.pos=[g,b,S,A],makeInteractive(s,x)}}}catch(e){r={error:e}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}t.wrapForOcclusion(s,y)};try{for(var A=i(u),x=A.next();!x.done;x=A.next()){var w=x.value;l.imageLoadCallback('img[src="'+w+'"]',callback)}}catch(e){c={error:e}}finally{try{x&&!x.done&&(f=A.return)&&f.call(A)}finally{if(c)throw c.error}}}),{priority:100}),{ready:!0}}))}}},8281:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.rectRecipes=t.rectKeyword=void 0;var i=r(3913),u=r(9031),a=r(3662);t.rectKeyword="occlusionRenderRect";var renderRects=function(e,t){var r=t.template,i=t.cache,s=t.environment,c=r.textFragments.flatMap(a.getImages),l=i.get(e.keyword,[]);s.post(a.svgKeyword,(function(){return!0}),!1)||a.appendStyleTag(a.svgCss),a.imageLoadCallback('img[src="'+c[0]+'"]',(function(e){var t,r,i=u.SVG.wrapImage(e.target);try{for(var a=n(l),s=a.next();!s.done;s=a.next()){var c=o(s.value,8),p=c[1],f=c[3],d=c[4],h=c[5],y=c[6],v=c[7];if(p){var m=u.Rect.make(i);for(var g in m.pos=[f,d,h,y],v){var b=g;m.prop(b,v[b])}i.append(m)}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}))},processProps=function(e,t){void 0===t&&(t={});var r={};return e.map((function(e){return e.split("=")})).forEach((function(e){var t=o(e,2),n=t[0],i=t[1];return r[n]=i})),Object.assign(r,t)},makeRects=function(e){return function(r,n){var i=r.fullKey,u=r.values,a=n.cache,s=n.aftermath,c=o(u),l=c[0],p=void 0===l?0:l,f=c[1],d=void 0===f?0:f,h=c[2],y=void 0===h?50:h,v=c[3],m=void 0===v?y:v,g=c.slice(4);return a.over(t.rectKeyword,(function(t){return t.push(["rect",!0,i,Number(p),Number(d),Number(y),Number(m),processProps(g,e)])}),[]),s.registerIfNotExists(t.rectKeyword,renderRects),{ready:!0}}};t.rectRecipes=i.generateFlashcardRecipes((function(e,t){return function(r){void 0===r&&(r={});var n={fill:"transparent",stroke:"transparent"},o=r.tagname,u=void 0===o?"rect":o,a=r.front,s=void 0===a?makeRects:a,c=r.back,l=void 0===c?makeRects:c,p=r.separator,f=void 0===p?{sep:","}:p,d=r.flashcardTemplate,h=void 0===d?i.makeFlashcardTemplate():d,y=r.frontProperties,v=void 0===y?{fill:"salmon",stroke:"yellow"}:y,m=r.backProperties,g=void 0===m?n:m,b=r.contextProperties,S=void 0===b?{}:b,A={separators:[f]};return h(e,t)(u,s(v),l(g),makeRects(n),makeRects(S),A)}}))},171:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.reverseEffects=void 0;t.reverseEffects=function(e){return function(t){var n=r(t,2),o=n[0],i=n[1];return function(e){return function(t){var n=r(t,2),o=n[0],i=n[1],u=e.getPropertyValue("zoom"),a=Number(u);return Number.isNaN(a)||a<=0?[o,i]:[o/a,i/a]}}(e)([o,i])}}},9031:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.Rect=t.SVG=void 0;var i=r(7850),u="http://www.w3.org/2000/svg",a=function(){function SVG(e,t,r){var n=this;this.constrainedFactorX=1,this.constrainedFactorY=1,this.elements=[],this.container=e,this.image=t,this.svg=r,this.resizer=new globalThis.ResizeObserver((function(){return n.resize()})),this.resizer.observe(t),this.setScaleFactors()}return SVG.prototype.setScaleFactors=function(){this.constrainedFactorX=this.image.width/this.image.naturalWidth,this.constrainedFactorY=this.image.height/this.image.naturalHeight},SVG.wrapImage=function(e){var t=document.createElement("div");e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e);var r=document.createElementNS(u,"svg");r.setAttributeNS(null,"width","100%"),r.setAttributeNS(null,"height","100%");var n=window.getComputedStyle(e);return r.style.zoom=n.getPropertyValue("zoom"),r.style.transform=n.getPropertyValue("transform"),t.appendChild(r),t.classList.add("closet__occlusion-container"),new SVG(t,e,r)},Object.defineProperty(SVG.prototype,"scaleFactors",{get:function(){return[this.constrainedFactorX,this.constrainedFactorY]},enumerable:!1,configurable:!0}),SVG.prototype.resize=function(){var e,t;if(this.setScaleFactors(),this.scaleFactors.includes(0))this.resizer.disconnect();else try{for(var r=n(this.elements),o=r.next();!o.done;o=r.next()){o.value.resize(this)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},SVG.prototype.append=function(e){var t,r;this.elements.push(e);try{for(var o=n(e.getElements()),i=o.next();!i.done;i=o.next()){var u=i.value;this.svg.appendChild(u)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},SVG.prototype.getElements=function(){return this.elements},SVG.prototype.getLabels=function(){return this.getElements().map((function(e){return e.getLabel()}))},SVG.prototype.remove=function(e){var t=this;this.elements.find((function(r,o){var i,u;if(r.getAnchorElement()===e.getAnchorElement()){try{for(var a=n(e.getElements()),s=a.next();!s.done;s=a.next()){s.value.remove()}}catch(e){i={error:e}}finally{try{s&&!s.done&&(u=a.return)&&u.call(a)}finally{if(i)throw i.error}}return t.elements.splice(o,1),!0}}))},SVG}();t.SVG=a;var s=function(){function Rect(e,t,r,n,o){this.container=e,this.rect=t,this.label=r,this.scalingFactorX=n,this.scalingFactorY=o}return Rect.make=function(e){var t=document.createElementNS(u,"svg"),r=document.createElementNS(u,"rect"),n=document.createElementNS(u,"text");t.appendChild(r),t.appendChild(n),t.classList.add("closet__occlusion-shape"),t.classList.add("closet__occlusion_rect"),t.tabIndex=-1;var i=o(e?e.scaleFactors:[1,1],2),a=new Rect(t,r,n,i[0],i[1]);return a.x=0,a.y=0,a.width=0,a.height=0,a.fill="moccasin",a.stroke="olive",a.strokeWidth=2,a},Rect.wrap=function(e,t){var r=o(t?t.scaleFactors:[1,1],2),n=r[0],i=r[1];return new Rect(e.parentElement,e,e.nextSibling,n,i)},Rect.prototype.prop=function(e,t){this[e]=t},Rect.prototype.remove=function(){this.container.remove()},Rect.prototype.getElements=function(){return[this.container]},Rect.prototype.getAnchorElement=function(){return this.rect},Rect.prototype.readjust=function(e){var t=e?e.scaleFactors:[1,1];this.scalingFactorX=t[0],this.scalingFactorY=t[1]},Rect.prototype.resize=function(e){var t=this.pos;this.readjust(e),this.pos=t},Rect.prototype.toDefinition=function(){return["rect",void 0,this.labelText,this.x,this.y,this.width,this.height,{}]},Rect.prototype.toText=function(){return""+i.TAG_OPEN+this.labelText+i.ARG_SEP+this.x.toFixed()+","+this.y.toFixed()+","+this.width.toFixed()+","+this.height.toFixed()+i.TAG_CLOSE},Object.defineProperty(Rect.prototype,"pos",{get:function(){return[this.x,this.y,this.width,this.height]},set:function(e){var t=o(e,4),r=t[0],n=t[1],i=t[2],u=t[3];this.width=i,this.height=u,this.x=r,this.y=n},enumerable:!1,configurable:!0}),Object.defineProperty(Rect.prototype,"scaled",{get:function(){return[Number(this.rect.getAttributeNS(null,"x")),Number(this.rect.getAttributeNS(null,"y")),Number(this.rect.getAttributeNS(null,"width")),Number(this.rect.getAttributeNS(null,"height"))]},enumerable:!1,configurable:!0}),Object.defineProperty(Rect.prototype,"x",{get:function(){return Number(this.rect.getAttributeNS(null,"x"))/this.scalingFactorX},set:function(e){var t=e*this.scalingFactorX;this.rect.setAttributeNS(null,"x",String(t)),this.label.setAttributeNS(null,"x",String(t+this.width/2*this.scalingFactorX))},enumerable:!1,configurable:!0}),Object.defineProperty(Rect.prototype,"y",{get:function(){return Number(this.rect.getAttributeNS(null,"y"))/this.scalingFactorY},set:function(e){var t=e*this.scalingFactorY;this.rect.setAttributeNS(null,"y",String(t)),this.label.setAttributeNS(null,"y",String(t+this.height/2*this.scalingFactorY))},enumerable:!1,configurable:!0}),Object.defineProperty(Rect.prototype,"width",{get:function(){return Number(this.rect.getAttributeNS(null,"width"))/this.scalingFactorX},set:function(e){var t=String(Math.max(10,e)*this.scalingFactorX);this.rect.setAttributeNS(null,"width",t),this.label.setAttributeNS(null,"width",t)},enumerable:!1,configurable:!0}),Object.defineProperty(Rect.prototype,"height",{get:function(){return Number(this.rect.getAttributeNS(null,"height"))/this.scalingFactorY},set:function(e){var t=String(Math.max(10,e)*this.scalingFactorY);this.rect.setAttributeNS(null,"height",t),this.label.setAttributeNS(null,"height",t)},enumerable:!1,configurable:!0}),Object.defineProperty(Rect.prototype,"rx",{get:function(){return Number(this.rect.getAttributeNS(null,"rx"))},set:function(e){this.rect.setAttributeNS(null,"rx",String(e))},enumerable:!1,configurable:!0}),Object.defineProperty(Rect.prototype,"ry",{get:function(){return Number(this.rect.getAttributeNS(null,"ry"))},set:function(e){this.rect.setAttributeNS(null,"ry",String(e))},enumerable:!1,configurable:!0}),Object.defineProperty(Rect.prototype,"fill",{get:function(){var e;return null!==(e=this.rect.getAttributeNS(null,"fill"))&&void 0!==e?e:""},set:function(e){this.rect.setAttributeNS(null,"fill",e)},enumerable:!1,configurable:!0}),Object.defineProperty(Rect.prototype,"fillOpacity",{get:function(){return Number(this.rect.getAttributeNS(null,"fill-opacity"))},set:function(e){this.rect.setAttributeNS(null,"fill-opacity",String(e))},enumerable:!1,configurable:!0}),Object.defineProperty(Rect.prototype,"stroke",{get:function(){var e;return null!==(e=this.rect.getAttributeNS(null,"stroke"))&&void 0!==e?e:""},set:function(e){this.rect.setAttributeNS(null,"stroke",e)},enumerable:!1,configurable:!0}),Object.defineProperty(Rect.prototype,"strokeOpacity",{get:function(){return Number(this.rect.getAttributeNS(null,"stroke-opacity"))},set:function(e){this.rect.setAttributeNS(null,"stroke-opacity",String(e))},enumerable:!1,configurable:!0}),Object.defineProperty(Rect.prototype,"strokeWidth",{get:function(){return Number(this.rect.getAttributeNS(null,"stroke-width"))},set:function(e){this.rect.setAttributeNS(null,"stroke-width",String(e))},enumerable:!1,configurable:!0}),Object.defineProperty(Rect.prototype,"labelText",{get:function(){return this.label.innerHTML},set:function(e){this.label.innerHTML=e},enumerable:!1,configurable:!0}),Rect.prototype.getLabel=function(){return this.labelText},Rect}();t.Rect=s},3662:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.svgCss=t.svgKeyword=t.getHighestNum=t.imageLoadCallback=t.getOffsets=t.getImages=t.appendStyleTag=void 0;var o=r(2939);t.appendStyleTag=function(e){var t=document.createElement("style");t.type="text/css",t.innerHTML=e,globalThis.document.head.appendChild(t)};var i=/<img[^>]*?src="(.+?)"[^>]*>/g;t.getImages=function(e){var t,r=[];do{(t=i.exec(e))&&r.push(t[1])}while(t);return r},t.getOffsets=function(e){if(navigator.userAgent.search("Chrome")>=0)return[e.offsetX,e.offsetY];var t=e.currentTarget,r=t.getBoundingClientRect(),n=t.parentElement.getBoundingClientRect();return[e.layerX-(n.left-r.left),e.layerY-(n.top-r.top)]},t.imageLoadCallback=function(e,t){var r=document.querySelector(e);r&&(r.complete?t({target:r}):r.addEventListener("load",t))},t.getHighestNum=function(e){var t,r,i=0;try{for(var u=n(e),a=u.next();!a.done;a=u.next()){var s=a.value.match(o.keySeparationPattern);if(s){var c=Number(s[2]);Number.isNaN(c)||(i=Math.max(i,c))}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return i},t.svgKeyword="occlusionSvgCss",t.svgCss="\nimg {\n  max-width: 100% !important;\n}\n\n.closet__occlusion-container {\n  display: inline-block;\n  position: relative;\n}\n\n.closet__occlusion-container > * {\n  display: block;\n\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.closet__occlusion-container > svg {\n  position: absolute;\n  top: 0;\n}\n\n.closet__occlusion-shape > text {\n  text-anchor: middle;\n  dominant-baseline: central;\n  pointer-events: none;\n}"},7917:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugRecipe=void 0,t.debugRecipe=function(){return function(e){e.register("tagpath",(function(e,t){return t.path.join(":")})),e.register("never",(function(){})),e.register("empty",(function(){return""})),e.register("key",(function(e){return e.key})),e.register("stopIteration",(function(e,t){var r=e.values,n=t.filters,o=Number(r),i=n.getOrDefault("base");return n.register("base",(function(e,t){var r;return t.iteration>=o?null!==(r=e.valuesText)&&void 0!==r?r:"":i(e,t)})),{ready:!0}})),e.register("memorytest",(function(e,t){var r=t.memory;return String(r.fold("base:memorytest",(function(e){return++e}),0))}))}}},8025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clozeRecipes=void 0;var n=r(3913),o=r(6534),i=r(8358).Stylizer.make({processor:function(e){return'<span style="color: cornflowerblue;">'+e+"</span>"}}),u=i.toStylizer({mapper:function(e){return"["+e+"]"}}),hintEllipser=function(e,t){var r;return[null!==(r=e.values[1])&&void 0!==r?r:"..."]},firstValue=function(e,t){return{ready:t.ready,result:e.values[0]}},firstValueAsList=function(e,t){return[e.values[0]]};t.clozeRecipes=n.generateFlashcardRecipes((function(e,t){return function(r){void 0===r&&(r={});var a=r.tagname,s=void 0===a?"c":a,c=r.inactiveEllipser,l=void 0===c?n.ellipsis:c,p=r.frontStylizer,f=void 0===p?u:p,d=r.frontEllipser,h=void 0===d?hintEllipser:d,y=r.backStylizer,v=void 0===y?i:y,m=r.backEllipser,g=void 0===m?firstValueAsList:m,b=r.separator,S=void 0===b?{sep:"::",max:2}:b,A=r.flashcardTemplate,x=void 0===A?n.makeFlashcardTemplate():A,w=o.listStylize(f,h),_=o.listStylize(v,g),F={separators:[S]};return x(e,t)(s,w,_,firstValue,l,F)}}))},531:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBackAll=t.isBack=t.isActiveAll=t.isActiveOverwritten=t.isActiveGetRange=t.isActive=t.isActiveWithinRange=void 0;var n=r(5272);t.isActiveWithinRange=function(e,t,r,n){return e-r<=t&&t<=e+n},t.isActive=function(e,t){var r=e.num,n=t.preset;switch(r){case null:return!1;case 0:return!0;default:return!!Object.prototype.hasOwnProperty.call(n,"cardNumber")&&r===n.cardNumber}},t.isActiveGetRange=function(e,r){var o=e.key,i=e.num,u=e.fullOccur,a=r.preset,s=r.cache,c=n.constantGet(0),l=null,p=null;switch(i){case null:return!1;case 0:return!0;default:return"number"==typeof a.cardNumber&&(l=s.get("flashcardActiveBottom",c).get(o,a.cardNumber,u),p=s.get("flashcardActiveTop",c).get(o,a.cardNumber,u),t.isActiveWithinRange(a.cardNumber,i,l,p))}},t.isActiveOverwritten=function(e,t){return t.cache.get("flashcardActive",n.constantGet(!1)).get(e.key,e.num,e.fullOccur)},t.isActiveAll=function(e,r){return t.isActiveOverwritten(e,r)||t.isActiveGetRange(e,r)},t.isBack=function(e,t){return"back"===t.preset.side},t.isBackAll=t.isBack},3913:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ellipsis=t.generateFlashcardRecipes=t.makeFlashcardTemplate=void 0;var n=r(2939),o=r(5937),i=r(7231),u=r(531),a=r(4803);t.makeFlashcardTemplate=function(e,t,r){return void 0===e&&(e=u.isActiveAll),void 0===t&&(t=u.isBackAll),void 0===r&&(r=a.inactiveAdapterAll),function(n,u){return function(a,s,c,l,p,f){return void 0===f&&(f={}),function(d){var h=a+":internal";o.sumFour(i.simpleRecipe(r(n)(l,p)),i.simpleRecipe(s),i.simpleRecipe(r(u)(l,p)),i.simpleRecipe(c),e,t)({tagname:h})(d);d.register(a,(function(e,t){return t.filters.getOrDefault(h)(e,t)}),f)}}}},t.generateFlashcardRecipes=function(e){return[e(n.id,n.id),e(n.id2,n.id2),e(n.id2,n.id)]},t.ellipsis=n.constant("[...]")},4803:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.inactiveAdapterAll=t.inactiveAdapterGetRange=t.inactiveAdapterWithinRange=t.inactiveAdapterOverwritten=t.inactiveAdapter=void 0;var o=r(5272),i=o.constantGet(!1),u=o.constantGet(0);t.inactiveAdapter=function(e){return function(t,r){return function(n,o){return e(t,r)(n,o)}}},t.inactiveAdapterOverwritten=function(e){return function(t){return function(r,n){return function(o,u){return u.cache.get("flashcardShow",i).get(o.key,o.num,o.fullOccur)?r(o,u):u.cache.get("flashcardHide",i).get(o.key,o.num,o.fullOccur)?n(o,u):e(t)(r,n)(o,u)}}}},t.inactiveAdapterWithinRange=function(e){return function(r){return function(o,i){return function(u,a){if(!Object.prototype.hasOwnProperty.call(a.preset,"cardNumber"))return e(r)(o,i)(u,a);var s=n(t.inactiveAdapterGetRange(u,a),4),c=s[0],l=s[1],p=s[2],f=s[3],d=a.preset.cardNumber;return d&&u.num?d-c<=u.num&&u.num<=d+l?o(u,a):d-p<=u.num&&u.num<=d+f?i(u,a):e(r)(o,i)(u,a):r(o,i)(u,a)}}}},t.inactiveAdapterGetRange=function(e,t){var r=t.cache,n=t.preset;if(!n.cardNumber)return[0,0,0,0];return[r.get("flashcardShowBottom",u).get(e.key,n.cardNumber,e.fullOccur),r.get("flashcardShowTop",u).get(e.key,n.cardNumber,e.fullOccur),r.get("flashcardHideBottom",u).get(e.key,n.cardNumber,e.fullOccur),r.get("flashcardHideTop",u).get(e.key,n.cardNumber,e.fullOccur)]},t.inactiveAdapterAll=t.inactiveAdapterOverwritten(t.inactiveAdapterWithinRange(t.inactiveAdapter))},7282:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.jumble=t.sort=t.mingle=t.specification=t.multipleChoice=t.cloze=t.prepareFlashcardRecipes=void 0;var o=r(8025),i=r(6342),u=r(673),a=r(5353);t.prepareFlashcardRecipes=function(e){var t=n(e,3);return{show:t[0],hide:t[1],reveal:t[2]}},t.cloze=t.prepareFlashcardRecipes(o.clozeRecipes),t.multipleChoice=t.prepareFlashcardRecipes(i.multipleChoiceRecipes),t.specification=t.prepareFlashcardRecipes(u.specRecipes),t.mingle=t.prepareFlashcardRecipes(a.mingleRecipes),t.sort=t.prepareFlashcardRecipes(a.sortRecipes),t.jumble=t.prepareFlashcardRecipes(a.jumbleRecipes)},6342:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multipleChoiceRecipes=void 0;var n=r(8358),o=r(5587),i=r(6534),u=r(523),a=r(3913),valuesWithIndex=function(e,t){return e.values?e.values.flatMap((function(e,t){return e.map((function(e){return[e,t]}))})):[]},firstCategory=function(e,t){return e.values[0]},s=n.Stylizer.make(),c=s.toStylizer({processor:function(e){return"( "+e+" )"},mapper:function(e){return'<span style="color: orange;">'+e+"</span>"}}),l=c.toStylizer({mapper:function(e,t,r){return'<span style="color: '+(0===r?"lime":"red")+';">'+e+"</span>"}});t.multipleChoiceRecipes=a.generateFlashcardRecipes((function(e,t){return function(r){void 0===r&&(r={});var n=r.tagname,p=void 0===n?"mc":n,f=r.frontStylizer,d=void 0===f?c:f,h=r.backStylizer,y=void 0===h?l:h,v=r.inactiveStylizer,m=void 0===v?s:v,g=r.contexter,b=void 0===g?firstCategory:g,S=r.ellipser,A=void 0===S?a.ellipsis:S,x=r.getValues,w=void 0===x?valuesWithIndex:x,_=r.sequence,F=void 0===_?o.acrossTag:_,E=r.sortInStrategy,k=void 0===E?u.topUp:E,T=r.categorySeparator,O=void 0===T?"::":T,C=r.valueSeparator,P=void 0===C?"||":C,B=r.flashcardTemplate,N=void 0===B?a.makeFlashcardTemplate():B,R=F(w,k),D=i.listStylizeMaybe(d,R),j=i.listStylizeMaybe(y,R),M={separators:[{sep:O},{sep:P,keepEmpty:!1}]};return N(e,t)(p,D,j,i.listStylize(m,b),A,M)}}))},5353:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jumbleRecipes=t.sortRecipes=t.mingleRecipes=void 0;var n=r(6534),o=r(3913),i=r(8358),u=r(5587),a=r(523),justValues=function(e,t){return e.values},s=i.Stylizer.make({separator:", "}),c=i.Stylizer.make({processor:function(e){return'<span style="color: cornflowerblue;">'+e+"</span>"}}),valuesInOrder=function(e,t){return e.values?e.values:[]},simplyShow=function(e,t){return n.listStylize(e,justValues)},oneSidedShufflePublicApi=function(e,t){return function(r,i){return function(l){void 0===l&&(l={});var p=l.tagname,f=void 0===p?"shuf":p,d=l.activeStylizer,h=void 0===d?c:d,y=l.inactiveStylizer,v=void 0===y?s:y,m=l.contexter,g=void 0===m?valuesInOrder:m,b=l.ellipser,S=void 0===b?o.ellipsis:b,A=l.sequence,x=void 0===A?u.acrossTag:A,w=l.sortInStrategy,_=void 0===w?a.topUp:w,F=l.separator,E=void 0===F?{sep:"::"}:F,k=l.flashcardTemplate,T=void 0===k?o.makeFlashcardTemplate():k,O={separators:[E]},C=x(g,_),P=e(h,C),B=t(h,C),N=n.listStylize(v,g);return T(r,i)(f,P,B,N,S,O)}}};t.mingleRecipes=o.generateFlashcardRecipes(oneSidedShufflePublicApi(n.listStylizeMaybe,n.listStylizeMaybe)),t.sortRecipes=o.generateFlashcardRecipes(oneSidedShufflePublicApi(n.listStylizeMaybe,simplyShow)),t.jumbleRecipes=o.generateFlashcardRecipes(oneSidedShufflePublicApi(simplyShow,n.listStylizeMaybe))},673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.specRecipes=void 0;var n=r(3913),insert=function(e){return{result:e.values,containsTags:!0}},noinsert=function(){return""};t.specRecipes=n.generateFlashcardRecipes((function(e,t){return function(r){void 0===r&&(r={});var o=r.tagname,i=void 0===o?"spec":o,u=r.flashcardTemplate;return(void 0===u?n.makeFlashcardTemplate():u)(e,t)(i,insert,insert,insert,noinsert,{capture:!0})}}))},9645:function(e,t){"use strict";var r=this&&this.__generator||function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.generateRealRecipe=t.generateIntegerRecipe=t.generateTemplate=t.intStop=t.intOutput=t.intAlgorithm=t.numberGenerator=void 0;t.numberGenerator=function(e,t,n,o){var i,u;return void 0===n&&(n=[]),void 0===o&&(o=function(){return!1}),r(this,(function(r){switch(r.label){case 0:i=0,r.label=1;case 1:return!o(n)&&i<1e3?(u=e(),t&&n.includes(u)?[3,3]:(n.push(u),[4,u])):[3,4];case 2:r.sent(),r.label=3;case 3:return i++,[3,1];case 4:return[2]}}))},t.intAlgorithm=function(e,t){return function(){return e+Math.floor(Math.random()*(t-e))}},t.intOutput=function(e,t){return String(e*t)},t.intStop=function(e,t){return function(r){return r.length>=t-e}};t.generateTemplate=function(e,r,o){return function(i){var u=void 0===i?{}:i,a=u.tagname,s=void 0===a?"gen":a,c=u.uniqueConstraintId,l=void 0===c?"uniq":c,p=u.separator,f=void 0===p?{sep:","}:p;return function(i){var u="gen:"+l;i.register(s,(function(i,a){var c=i.values,l=i.fullOccur,p=i.num,f=a.memory,d=n(1===c.length?[1,Number(c[0]),o]:c.map(Number),3),h=d[0],y=void 0===h?1:h,v=d[1],m=void 0===v?100:v,g=d[2],b=void 0===g?o:g,S=Number.isInteger(p)?u+":"+p:u,A="gen:"+s+":"+l;return{ready:!0,result:f.lazy(A,(function(){var n=t.numberGenerator(e(y,m),!0,Number.isInteger(p)?f.get(S,[]):[]).next();return n.done?"":r(n.value,b)}))}}),{separators:[f]})}}},t.generateIntegerRecipe=t.generateTemplate(t.intAlgorithm,t.intOutput,1),t.generateRealRecipe=t.generateTemplate((function(e,t){return function(){return e+Math.random()*(t-e)}}),(function(e,t){return e.toFixed(t)}),2)},389:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sequencers=t.wrappers=t.recipes=void 0;var n=r(2244),o=r(4746),i=r(9645),u=r(4318),a=r(5272),s=r(2827),c=r(7917),l=r(7794),p=r(7282);t.recipes={shuffle:n.shufflingRecipe,order:o.orderingRecipe,generateInteger:i.generateIntegerRecipe,generateReal:i.generateRealRecipe,process:u.processRecipe,stylize:u.styleRecipe,activate:a.activateRecipe,deactivate:a.deactivateRecipe,setNumber:a.setNumberRecipe,setList:s.setListRecipe,pick:s.pickRecipe,pickIndex:s.pickIndexRecipe,debug:c.debugRecipe,define:l.defRecipe,cloze:p.cloze,multipleChoice:p.multipleChoice,specification:p.specification,mingle:p.mingle,sort:p.sort,jumble:p.jumble},t.deciders=r(531);var f=r(3813),d=r(5937),h=r(8685);t.wrappers={wrap:f.wrap,deferred:f.wrapWithDeferred,aftermath:f.wrapWithAftermath,sum:d.sum,sumFour:d.sumFour,product:h.product};var y=r(5587);t.sequencers={withinTag:y.withinTag,acrossTag:y.acrossTag}},7794:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.defRecipe=void 0;var n=/%(.)/gu,o={separators:[{sep:"::",max:2}],capture:!0};t.defRecipe=function(e){return void 0===e&&(e={}),function(t){var i=e.tagname,u=void 0===i?"def":i,a={separators:[{sep:"::"}]};t.register(u,(function(e){var o=r(e.values,2),i=o[0],u=o[1];return t.register(i,(function(e){return{result:u.replace(n,function(e){return function(t,r){var n,o=null;switch(r){case"%":return r;case"n":return"number"==typeof e.num?String(e.num):"";case"k":return e.key;case"f":return e.fullKey;default:return o=Number(r),Number.isNaN(o)?t:null!==(n=e.values[o])&&void 0!==n?n:""}}}(e)),containsTags:!0}}),a),{ready:!0}}),o)}}},4746:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.orderingRecipe=void 0;var i=r(2939),u=r(523);t.orderingRecipe=function(e){var t=void 0===e?{}:e,r=t.tagname,a=void 0===r?"ord":r,s=t.separator,c=void 0===s?",":s,l=t.cmdSeparator,p=void 0===l?"::":l,f=t.sortInStrategy,d=void 0===f?u.topUp:f;return function(e){e.register(a,(function(e,t){var r,u,a=t.deferred,s=t.cache,c=t.memory,_loop_1=function(t,r){var o=e.key+":ord:occupied:"+t,u=r.filter((function(e){return!s.get(o,[]).includes(e)}));s.fold(o,(function(e){return e.concat(u)}),[]);var l=new Set(u),p=e.key+":"+e.fullOccur+":ord:"+t;a.register(p,(function(){var e,t,_loop_2=function(e){a.block(e+":shuffle");var t=e+":shuffle";if(0!==s.get(e+":waitingSet",new Set).size)return"continue";var r=s.get(t,[]),n=d(s.get(p,c.get(t,[])),r.length);s.fold(t,(function(e){return i.sortWithIndices(e,n)}),[]),l.delete(e),s.set(p,n),c.set(t,n)};try{for(var r=(e=void 0,n(l)),o=r.next();!o.done;o=r.next()){_loop_2(o.value)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}0===l.size&&a.unregister(p)}),{priority:35,persistent:!0})};try{for(var l=n(e.values.entries()),p=l.next();!p.done;p=l.next()){var f=o(p.value,2);_loop_1(f[0],f[1])}}catch(e){r={error:e}}finally{try{p&&!p.done&&(u=l.return)&&u.call(l)}finally{if(r)throw r.error}}return{ready:!0}}),{separators:[p,c]})}}},8601:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateRecipe=t.activateRecipe=void 0;var i=r(9234),u=function(e){function BoolStore(){return null!==e&&e.apply(this,arguments)||this}return o(BoolStore,e),BoolStore.prototype.on=function(e){this.set(e,!0)},BoolStore.prototype.off=function(e){this.set(e,!1)},BoolStore}(i.PreferenceStore),a=i.storeTemplate(u);t.activateRecipe=function(e){var t=void 0===e?{}:e,r=t.tagname,n=void 0===r?"on":r,o=t.storeId,u=void 0===o?"active":o,s=t.separator,c=void 0===s?i.defaultSeparator:s;return function(e){return e.register(n,a(u,!1,(function(e){return function(t){t.on(e)}})),{separators:[c,i.innerSeparator]})}},t.deactivateRecipe=function(e){var t=void 0===e?{}:e,r=t.tagname,n=void 0===r?"off":r,o=t.storeId,u=void 0===o?"active":o,s=t.separator,c=void 0===s?i.defaultSeparator:s;return function(e){return e.register(n,a(u,!1,(function(e){return function(t){return t.off(e)}})),{separators:[c,i.innerSeparator]})}}},5272:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.constantGet=void 0,t.constantGet=function(e){return{get:function(){return e}}};var n=r(2558);Object.defineProperty(t,"setNumberRecipe",{enumerable:!0,get:function(){return n.setNumberRecipe}});var o=r(8601);Object.defineProperty(t,"activateRecipe",{enumerable:!0,get:function(){return o.activateRecipe}}),Object.defineProperty(t,"deactivateRecipe",{enumerable:!0,get:function(){return o.deactivateRecipe}})},2558:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.setNumberRecipe=void 0;var i=r(9234),u=function(e){function NumberStore(){return null!==e&&e.apply(this,arguments)||this}return o(NumberStore,e),NumberStore.prototype.setNumber=function(e,t){this.set(e,Number.isNaN(t)?0:t)},NumberStore}(i.PreferenceStore),a=i.storeTemplate(u);t.setNumberRecipe=function(e){var t=void 0===e?{}:e,r=t.tagname,n=void 0===r?"set":r,o=t.storeId,u=void 0===o?"numerical":o,s=t.separator,c=void 0===s?i.defaultSeparator:s,l=t.assignmentSeparator,p=void 0===l?i.innerSeparator:l;return function(e){return e.register(n,a(u,0,(function(e,t){return function(r){return r.setNumber(e,Number(t))}})),{separators:[c,p]})}}},9234:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.storeTemplate=t.PreferenceStore=t.innerSeparator=t.defaultSeparator=void 0;var u=r(7915);t.defaultSeparator={sep:";"},t.innerSeparator={sep:"=",trim:!0,max:2};var a=function(){function PreferenceStore(e){this.defaultValue=e,this.predicates=[]}return PreferenceStore.prototype.set=function(e,t){this.predicates.unshift([u.parseTagSelector(e),t])},PreferenceStore.prototype.get=function(e,t,r){var i,u;try{for(var a=n(this.predicates),s=a.next();!s.done;s=a.next()){var c=o(s.value,2),l=c[0],p=c[1];if(l(e,t,r))return p}}catch(e){i={error:e}}finally{try{s&&!s.done&&(u=a.return)&&u.call(a)}finally{if(i)throw i.error}}return this.defaultValue},PreferenceStore}();t.PreferenceStore=a,t.storeTemplate=function(e){return function(t,r,n){return function(o,u){var a=u.cache;return o.values.forEach((function(o){a.over(t,n.apply(void 0,i(o)),new e(r))})),{ready:!0}}}}},8685:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.product=void 0;var n=r(3813);t.product=function(e,t,r,o){void 0===r&&(r=function(){return function(){return{ready:!0}}});var i=void 0===o?{wrapId:"product",getTagnames:n.defaultTagnameGetter,setTagnames:n.defaultTagnameSetter}:o,u=i.wrapId,a=i.setTagnames;return function(n){var o=void 0===n?{}:n,i=o.tagname,s=void 0===i?"prod":i,c=o.optionsFirst,l=void 0===c?{}:c,p=o.optionsSecond,f=void 0===p?{}:p;return function(n){var o=s+":"+u+":fst",i=s+":"+u+":snd";a(l,[o]),a(f,[i]),e(l)(n),t(f)(n);n.register(s,(function(e,t){return r(t.filters.getOrDefault(o)(e,t),t.filters.getOrDefault(i)(e,t))(e,t)}),n.getOptions(o))}}}},5587:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.acrossTag=t.withinTag=t.sequencer=void 0;var o=r(2939);t.sequencer=function(e,t,r,n){return function(i,u){var a=e+":apply",s=e+":length",c=t+":waitingSet",l=t+":shuffle";if(u.cache.get(a,!1)){if(u.cache.get(c,new Set).size>0)return;for(var p=[],f=u.cache.get(l,[]),d=u.cache.get(s,0),h=0;h<d;h++){var y=f.shift();y&&p.push(y)}return p}if(u.ready){var v=n(i,u);if(0===v.length)return v;u.cache.fold(l,(function(e){return e.concat(v)}),[]),u.cache.set(s,v.length),u.deferred.registerIfNotExists(a,(function(){u.cache.set(a,!0),u.cache.over(c,(function(t){return t.delete(e)}),new Set)}),{priority:65}),u.deferred.registerIfNotExists(l,(function(){u.cache.over(c,(function(e){return e.size>0}),new Set)||u.cache.fold(l,(function(e){var t=u.memory.fold(l,(function(e){return r(e,u.cache.get(l,[]).length)}),[]);return o.sortWithIndices(e,t)}),[])}))}else u.cache.over(c,(function(t){return t.add(e)}),new Set)}};var sequenceTemplate=function(e){return function(r,o){return function(i,u){var a=n(e(i,u),2),s=a[0],c=a[1];return t.sequencer(s,c,o,r)(i,u)}}};t.withinTag=sequenceTemplate((function(e,t){var r=e.fullKey,n=e.fullOccur;return[r+":"+n,r+":"+n]}));t.acrossTag=sequenceTemplate((function(e,t){var r=e.fullKey;return[r+":"+e.fullOccur,r]}))},2827:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4227);Object.defineProperty(t,"setListRecipe",{enumerable:!0,get:function(){return n.setListRecipe}}),Object.defineProperty(t,"pickRecipe",{enumerable:!0,get:function(){return n.pickRecipe}}),Object.defineProperty(t,"pickIndexRecipe",{enumerable:!0,get:function(){return n.pickIndexRecipe}})},4227:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},u=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pickIndexRecipe=t.pickRecipe=t.setListRecipe=void 0;var a=r(6594),s=r(9645),c=function(e){function ListStore(){return null!==e&&e.apply(this,arguments)||this}return o(ListStore,e),ListStore.prototype.setList=function(e,t){this.set(e,t)},ListStore.prototype.getList=function(e){return this.get(e,[])},ListStore}(a.SharedStore),l=a.storeTemplate(c);t.setListRecipe=function(e){var t=void 0===e?{}:e,r=t.tagname,n=void 0===r?"setl":r,o=t.storeId,u=void 0===o?"lists":o,a=t.separator,s=void 0===a?{sep:"::"}:a,c=t.innerSeparator,p=void 0===c?{sep:"||"}:c;return function(e){return e.register(n,l(u,(function(e){return function(t){var r=i(e.values,2),n=r[0],o=r[1];t.setList(n[0],o)}})),{separators:[s,p]})}};var defaultPostprocess=function(e,t){return function(t,r){return e}};t.pickRecipe=function(e){var t=void 0===e?{}:e,r=t.tagname,n=void 0===r?"pick":r,o=t.storeId,i=void 0===o?"lists":o,a=t.postprocess,c=void 0===a?defaultPostprocess:a;return function(e){return e.register(n,l(i,(function(e,t){return function(r){var o=e.values,i=r.getList(o),a="pick:"+e.fullKey+":"+e.occur+":"+n+":picked",l=t.memory.lazy(a,(function(){var r,a,c=s.intAlgorithm(0,i.length),l=s.intStop(0,i.length),p=Boolean(e.num),f="pick:"+e.fullKey+":"+n+":uniqList:"+e.num,d=p?t.memory.over(f,(function(e){return Object.prototype.hasOwnProperty.call(e,o)||(e[o]=[]),e}),{})[o]:[],h=s.numberGenerator(c,p,d,l);try{for(var y=u(h),v=y.next();!v.done;v=y.next()){return v.value}}catch(e){r={error:e}}finally{try{v&&!v.done&&(a=y.return)&&a.call(y)}finally{if(r)throw r.error}}}));return c(Number.isInteger(l)?i[l]:"",i)(e,t)}})))}},t.pickIndexRecipe=function(e){var t=void 0===e?{}:e,r=t.tagname,n=void 0===r?"pick":r,o=t.storeId,i=void 0===o?"lists":o,u=t.postprocess,a=void 0===u?defaultPostprocess:u;return function(e){return e.register(n,l(i,(function(e,t){return function(r){var n,o,i=e.values,u=r.getList(i),s=Number(null!==(n=e.num)&&void 0!==n?n:0);return a(null!==(o=u[s])&&void 0!==o?o:"",u)(e,t)}})))}}},6594:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0}),t.storeTemplate=t.SharedStore=void 0;var i=function(e){function SharedStore(){return null!==e&&e.apply(this,arguments)||this}return o(SharedStore,e),SharedStore}(r(9983).Storage);t.SharedStore=i,t.storeTemplate=function(e){return function(t,r){return function(n,o){var i;return{ready:!0,result:null!==(i=o.cache.over(t,r(n,o),new e(new Map)))&&void 0!==i?i:""}}}}},2244:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shufflingRecipe=void 0;var n=r(8358),o=r(5587),i=r(523);t.shufflingRecipe=function(e){var t=void 0===e?{}:e,r=t.tagname,u=void 0===r?"mix":r,a=t.stylizer,s=void 0===a?n.Stylizer.make():a,c=t.sortInStrategy,l=void 0===c?i.topUp:c;return function(e){e.register(u,(function(e,t){var r=e.fullKey+":"+e.fullOccur,n=e.num?e.fullKey:r,i=o.sequencer(r,n,l,(function(e,t){var r=e.values;return null!=r?r:[]}))(e,t);if(i)return s.stylize(i)}),{separators:["||"]})}}},7231:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simpleRecipe=void 0,t.simpleRecipe=function(e){return function(t){var r=(void 0===t?{}:t).tagname,n=void 0===r?"s":r;return function(t){t.register(n,e)}}}},523:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.mixIn=t.topUp=void 0;var i=r(2939);t.topUp=function(e,t){if(e.length>=t)return e;var r=i.shuffle(Array.from(new Array(t-e.length),(function(t,r){return r+e.length})));return o(e,r)},t.mixIn=function(e,t){if(e.length>=t)return e;var r=Array.from(new Array(t-e.length),(function(t,r){return r+e.length})),n=o(e);return r.forEach((function(e){return n.splice(Math.floor(Math.random()*(n.length+1)),0,e)})),n}},6534:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.listStylizeMaybe=t.listStylize=void 0;var transpose=function(e){return Array.isArray(e[0])?e[0].map((function(t,r){return e.map((function(e){return e[r]}))})):[e]};t.listStylize=function(e,t){return function(r,o){return o.ready?e.stylize.apply(e,n(transpose(t(r,o)))):{ready:!1}}},t.listStylizeMaybe=function(e,t){return function(r,o){if(!o.ready)return{ready:!1};var i=t(r,o);return i?e.stylize.apply(e,n(transpose(i))):{ready:!1}}}},8358:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Stylizer=void 0;var i=r(2939),u=function(){function Stylizer(e,t,r){this.separator=e,this.mapper=t,this.processor=r}return Stylizer.make=function(e){var t=void 0===e?{}:e,r=t.separator,n=void 0===r?", ":r,o=t.mapper,u=void 0===o?i.id:o,a=t.processor;return new Stylizer(n,u,void 0===a?i.id:a)},Stylizer.prototype.toStylizer=function(e){var t=void 0===e?{}:e,r=t.separator,n=void 0===r?this.separator:r,o=t.mapper,i=void 0===o?this.mapper:o,u=t.processor;return new Stylizer(n,i,void 0===u?this.processor:u)},Stylizer.prototype.stylize=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return this.processor(e.flatMap((function(e,n,i){return t.mapper.apply(t,o([e,n],r.map((function(e){return e[n]})),[i]))})).join(this.separator))},Stylizer.prototype.stylizeFull=function(e,t,r){var n=this;return void 0===t&&(t=[]),void 0===r&&(r=[]),this.processor.apply(this,o([e.flatMap((function(e,r,i){return n.mapper.apply(n,o([e,r],t.map((function(e){return e[r]})),[i]))})).join(this.separator)],r))},Stylizer}();t.Stylizer=u},4318:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processRecipe=t.styleRecipe=void 0;var n=r(8358),o=r(2939);t.styleRecipe=function(e){var t=void 0===e?{}:e,r=t.tagname,o=void 0===r?"s":r,i=t.stylizer,u=void 0===i?n.Stylizer.make():i,a=t.separator,s=void 0===a?"::":a;return function(e){e.register(o,(function(e){return u.stylize(e.values)}),{separators:[s]})}},t.processRecipe=function(e){var t=void 0===e?{}:e,r=t.tagname,n=void 0===r?"s":r,i=t.processor,u=void 0===i?o.id:i;return function(e){e.register(n,(function(e){return u(e.values)}),{separators:[]})}}},5937:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sumFour=t.sum=void 0;var n=r(3813);t.sum=function(e,t,r,o){var i=void 0===o?{wrapId:"sum",getTagnames:n.defaultTagnameGetter,setTagnames:n.defaultTagnameSetter}:o,u=i.wrapId,a=i.setTagnames;return function(n){var o=void 0===n?{}:n,i=o.tagname,s=void 0===i?"sum":i,c=o.optionsFalse,l=void 0===c?{}:c,p=o.optionsTrue,f=void 0===p?{}:p;return function(n){var o=s+":"+u+":true",i=s+":"+u+":false";a(f,[o]),a(l,[i]),e(l)(n),t(f)(n);n.register(s,(function(e,t){return r(e,t)?t.filters.getOrDefault(o)(e,t):t.filters.getOrDefault(i)(e,t)}),n.getOptions(o))}}},t.sumFour=function(e,r,o,i,u,a,s){var c=void 0===s?{wrapId:"sumFour",getTagnames:n.defaultTagnameGetter,setTagnames:n.defaultTagnameSetter}:s,l=c.wrapId,p=c.setTagnames;return function(n){var s=void 0===n?{}:n,c=s.tagname,f=void 0===c?"sum":c,d=s.optionsZero,h=void 0===d?{}:d,y=s.optionsOne,v=void 0===y?{}:y,m=s.optionsTwo,g=void 0===m?{}:m,b=s.optionsThree,S=void 0===b?{}:b;return function(n){var s=f+":"+l+":zero",c=f+":"+l+":two";p(h,[s]),p(v,[s]),t.sum(e,r,u)({tagname:s,optionsFalse:h,optionsTrue:v})(n),p(g,[c]),p(S,[c]),t.sum(o,i,u)({tagname:c,optionsFalse:g,optionsTrue:S})(n);n.register(f,(function(e,t){return a(e,t)?t.filters.getOrDefault(c)(e,t):t.filters.getOrDefault(s)(e,t)}))}}}},2939:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.sortWithIndices=t.shuffle=t.unicodeAlphanumericPattern=t.unicodeNumberPattern=t.unicodeLetterPattern=t.zeroWidthSpace=t.constant=t.id2=t.id=void 0,t.id=function(e){return e},t.id2=function(e,t){return t},t.constant=function(e){return function(t){return e}};var o=r(4766);Object.defineProperty(t,"keyPattern",{enumerable:!0,get:function(){return o.keyPattern}});var i=r(4549);Object.defineProperty(t,"keySeparationPattern",{enumerable:!0,get:function(){return i.keySeparationPattern}}),t.zeroWidthSpace="​";var u="A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B4\\u08B6-\\u08BD\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C80\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D54-\\u0D56\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16F1-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1C80-\\u1C88\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AE\\uA7B0-\\uA7B7\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC",a="0-9\\xB2\\xB3\\xB9\\xBC-\\xBE\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u09F4-\\u09F9\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0B72-\\u0B77\\u0BE6-\\u0BF2\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0CE6-\\u0CEF\\u0D58-\\u0D5E\\u0D66-\\u0D78\\u0DE6-\\u0DEF\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F33\\u1040-\\u1049\\u1090-\\u1099\\u1369-\\u137C\\u16EE-\\u16F0\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19DA\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\u2070\\u2074-\\u2079\\u2080-\\u2089\\u2150-\\u2182\\u2185-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2CFD\\u3007\\u3021-\\u3029\\u3038-\\u303A\\u3192-\\u3195\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\uA620-\\uA629\\uA6E6-\\uA6EF\\uA830-\\uA835\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uA9F0-\\uA9F9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19";t.unicodeLetterPattern=new RegExp("["+u+"]","gu"),t.unicodeNumberPattern=new RegExp("["+a+"]","gu"),t.unicodeAlphanumericPattern=new RegExp("["+u+a+"]","gu"),t.shuffle=function(e){for(var t=e.slice(0),r=e.length;0!==r;){var n=Math.floor(Math.random()*r),o=t[r-=1];t[r]=t[n],t[n]=o}return t},t.sortWithIndices=function(e,t){var r,o,i,u,a=[];try{for(var s=n(t),c=s.next();!c.done;c=s.next()){var l=e[h=c.value];l&&a.push(l)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}if(t.length<e.length){var p=Array.from(new Array(e.length-t.length),(function(e,r){return r+t.length}));try{for(var f=n(p),d=f.next();!d.done;d=f.next()){var h=d.value;a.push(e[h])}}catch(e){i={error:e}}finally{try{d&&!d.done&&(u=f.return)&&u.call(f)}finally{if(i)throw i.error}}}return a}},3813:function(e,t){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.wrapWithAftermath=t.wrapWithDeferred=t.wrap=t.defaultTagnameSetter=t.defaultTagnameGetter=void 0,t.defaultTagnameGetter=function(e){return Object.prototype.hasOwnProperty.call(e,"tagname")?[e.tagname]:[]},t.defaultTagnameSetter=function(e,t){return e.tagname=t[0]};var n="wrapped";t.wrap=function(e){return function(o,i){var u=void 0===i?{wrapId:n,getTagnames:t.defaultTagnameGetter,setTagnames:t.defaultTagnameSetter}:i,a=u.wrapId,s=u.getTagnames,c=u.setTagnames;return function(t){return void 0===t&&(t={}),function(n){var i,u,l=s(t),makeInternalKeyword=function(e){return e+":"+a+":internal"},p=new Map,f=l.map((function(e){var t=makeInternalKeyword(e);return p.set(e,t),t}));c(t,f),o(t)(n);var wrapFilter=function(t,r){var n=p.get(t.key);return e(Object.assign({},t,{keyInternal:n}),r),r.filters.getOrDefault(n)(t,r)};try{for(var d=r(l),h=d.next();!h.done;h=d.next()){var y=h.value;n.register(y,wrapFilter,n.getOptions(makeInternalKeyword(y)))}}catch(e){i={error:e}}finally{try{h&&!h.done&&(u=d.return)&&u.call(d)}finally{if(i)throw i.error}}}}}};var wrapWithDeferredTemplate=function(e){return function(r,o,i){return void 0===i&&(i={wrapId:n,getTagnames:t.defaultTagnameGetter,setTagnames:t.defaultTagnameSetter}),t.wrap((function(t,r){e(r).registerIfNotExists(t.keyInternal,o)}))(r,i)}};t.wrapWithDeferred=wrapWithDeferredTemplate((function(e){return e.deferred})),t.wrapWithAftermath=wrapWithDeferredTemplate((function(e){return e.aftermath}))},2958:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};function id(e){return e[0]}Object.defineProperty(t,"__esModule",{value:!0});var i=r(4207),u=r(4549),a={Lexer:i.tagSelectorTokenizer,ParserRules:[{name:"start",symbols:["allStar"],postprocess:id},{name:"start",symbols:["pattern"],postprocess:id},{name:"allStar",symbols:[i.tagSelectorTokenizer.has("allStar")?{type:"allStar"}:allStar],postprocess:function(){return function(){return!0}}},{name:"pattern",symbols:["key","num","occur"],postprocess:function(e){var t=n(e,3),r=t[0],o=t[1],i=t[2];return function(e,t,n){if(void 0===t){var a=e.match(u.keySeparationPattern);if(!a)return!1;var s=a[1],c=Number(a[2]),l=Number.isNaN(c)?null:c;return r.test(s)&&o(l)&&i(n)}return r.test(e)&&o(t)&&i(n)}}},{name:"key$ebnf$1$subexpression$1",symbols:["keyComps"]},{name:"key$ebnf$1",symbols:["key$ebnf$1$subexpression$1"]},{name:"key$ebnf$1$subexpression$2",symbols:["keyComps"]},{name:"key$ebnf$1",symbols:["key$ebnf$1","key$ebnf$1$subexpression$2"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"key",symbols:["key$ebnf$1"],postprocess:function(e){var t=n(e,1)[0];return new RegExp("^"+t.join("")+"$","u")}},{name:"keyComps",symbols:["mixedText"],postprocess:id},{name:"keyComps",symbols:["escapeseq"],postprocess:id},{name:"keyComps",symbols:["keyGroup"],postprocess:id},{name:"mixedText",symbols:[i.tagSelectorTokenizer.has("text")?{type:"text"}:text],postprocess:function(e){return n(e,1)[0].value}},{name:"mixedText",symbols:[i.tagSelectorTokenizer.has("star")?{type:"star"}:star],postprocess:function(){return".*"}},{name:"mixedText",symbols:[i.tagSelectorTokenizer.has("slash")?{type:"slash"}:slash],postprocess:function(){return"\\\\"}},{name:"escapeseq",symbols:[i.tagSelectorTokenizer.has("escapeseq")?{type:"escapeseq"}:escapeseq],postprocess:function(e){return n(e,1)[0].value}},{name:"keyGroup",symbols:[i.tagSelectorTokenizer.has("groupOpen")?{type:"groupOpen"}:groupOpen,"keyGroupInner",i.tagSelectorTokenizer.has("groupClose")?{type:"groupClose"}:groupClose],postprocess:function(e){return n(e,2)[1].join("")}},{name:"keyGroupInner$ebnf$1",symbols:[]},{name:"keyGroupInner$ebnf$1$subexpression$1",symbols:[i.tagSelectorTokenizer.has("groupAlternative")?{type:"groupAlternative"}:groupAlternative,"keyGroupItem"]},{name:"keyGroupInner$ebnf$1",symbols:["keyGroupInner$ebnf$1","keyGroupInner$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"keyGroupInner",symbols:["keyGroupItem","keyGroupInner$ebnf$1"],postprocess:function(e){var t=n(e,2),r=t[0],i=t[1];return o([r],i.map((function(e){return e.value})))}},{name:"keyGroupItem$ebnf$1",symbols:[]},{name:"keyGroupItem$ebnf$1$subexpression$1",symbols:["mixedText"]},{name:"keyGroupItem$ebnf$1",symbols:["keyGroupItem$ebnf$1","keyGroupItem$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"keyGroupItem",symbols:["keyGroupItem$ebnf$1"],postprocess:function(e){return n(e,1)[0].join("")}},{name:"num$ebnf$1$subexpression$1",symbols:["numPredicate"]},{name:"num$ebnf$1",symbols:["num$ebnf$1$subexpression$1"],postprocess:id},{name:"num$ebnf$1",symbols:[],postprocess:function(){return null}},{name:"num",symbols:["num$ebnf$1"],postprocess:function(e){var t=n(e,1)[0];return t?t[0]:function(e){return null===e}}},{name:"numPredicate",symbols:["numDigits"],postprocess:id},{name:"numPredicate",symbols:["numStar"],postprocess:id},{name:"numPredicate",symbols:["numGroup"],postprocess:id},{name:"numDigits",symbols:[i.tagSelectorTokenizer.has("numDigits")?{type:"numDigits"}:numDigits],postprocess:function(e){var t=n(e,1)[0];return function(e){return e===Number(t.value)}}},{name:"numStar",symbols:[i.tagSelectorTokenizer.has("numStar")?{type:"numStar"}:numStar],postprocess:function(){return function(e){return!0}}},{name:"numGroup",symbols:[i.tagSelectorTokenizer.has("groupOpen")?{type:"groupOpen"}:groupOpen,"numGroupInner",i.tagSelectorTokenizer.has("numGroupClose")?{type:"numGroupClose"}:numGroupClose],postprocess:function(e){var t=n(e,2)[1];return function(e){return t.reduce((function(t,r){return t||r(e)}),!1)}}},{name:"numGroupInner$ebnf$1",symbols:[]},{name:"numGroupInner$ebnf$1$subexpression$1",symbols:[i.tagSelectorTokenizer.has("groupAlternative")?{type:"groupAlternative"}:groupAlternative,"numGroupItem"]},{name:"numGroupInner$ebnf$1",symbols:["numGroupInner$ebnf$1","numGroupInner$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"numGroupInner",symbols:["numGroupItem","numGroupInner$ebnf$1"],postprocess:function(e){var t=n(e,2),r=t[0],i=t[1];return o([r],i.map((function(e){return n(e,2)[1]})))}},{name:"numGroupItem$ebnf$1$subexpression$1",symbols:["numGroupPredicate"]},{name:"numGroupItem$ebnf$1",symbols:["numGroupItem$ebnf$1$subexpression$1"],postprocess:id},{name:"numGroupItem$ebnf$1",symbols:[],postprocess:function(){return null}},{name:"numGroupItem",symbols:["numGroupItem$ebnf$1"],postprocess:function(e){var t=n(e,1)[0];return t?t[0]:function(e){return null===e}}},{name:"numGroupPredicate",symbols:["digits"],postprocess:id},{name:"numGroupPredicate",symbols:["range"],postprocess:id},{name:"numGroupPredicate",symbols:["multiple"],postprocess:id},{name:"digits",symbols:[i.tagSelectorTokenizer.has("digits")?{type:"digits"}:digits],postprocess:function(e){var t=n(e,1)[0];return function(e){return e===Number(t.value)}}},{name:"range",symbols:["bounded"],postprocess:id},{name:"range",symbols:["leftBounded"],postprocess:id},{name:"range",symbols:["rightBounded"],postprocess:id},{name:"bounded",symbols:[i.tagSelectorTokenizer.has("digits")?{type:"digits"}:digits,i.tagSelectorTokenizer.has("rangeSpecifier")?{type:"rangeSpecifier"}:rangeSpecifier,i.tagSelectorTokenizer.has("digits")?{type:"digits"}:digits],postprocess:function(e){var t=n(e,3),r=t[0],o=t[2];return function(e){return"number"==typeof e&&Number(r.value)<=e&&e<=Number(o.value)}}},{name:"leftBounded",symbols:[i.tagSelectorTokenizer.has("digits")?{type:"digits"}:digits,i.tagSelectorTokenizer.has("rangeSpecifier")?{type:"rangeSpecifier"}:rangeSpecifier],postprocess:function(e){var t=n(e,1)[0];return function(e){return"number"==typeof e&&Number(t.value)<=e}}},{name:"rightBounded",symbols:[i.tagSelectorTokenizer.has("rangeSpecifier")?{type:"rangeSpecifier"}:rangeSpecifier,i.tagSelectorTokenizer.has("digits")?{type:"digits"}:digits],postprocess:function(e){var t=n(e,2)[1];return function(e){return"number"==typeof e&&e<=Number(t.value)}}},{name:"multiple",symbols:[i.tagSelectorTokenizer.has("digits")?{type:"digits"}:digits,i.tagSelectorTokenizer.has("multiplierSeq")?{type:"multiplierSeq"}:multiplierSeq,i.tagSelectorTokenizer.has("digits")?{type:"digits"}:digits],postprocess:function(e){var t=n(e,3),r=t[0],o=t[2];return function(e){return(e-o)%r==0}}},{name:"occur$ebnf$1$subexpression$1",symbols:[i.tagSelectorTokenizer.has("occurSep")?{type:"occurSep"}:occurSep,"occurPredicate"]},{name:"occur$ebnf$1",symbols:["occur$ebnf$1$subexpression$1"],postprocess:id},{name:"occur$ebnf$1",symbols:[],postprocess:function(){return null}},{name:"occur",symbols:["occur$ebnf$1"],postprocess:function(e){var t=n(e,1)[0];return t?t[1]:function(){return!0}}},{name:"occurPredicate",symbols:["numDigits"],postprocess:id},{name:"occurPredicate",symbols:["numStar"],postprocess:id},{name:"occurPredicate",symbols:["occurGroup"],postprocess:id},{name:"occurGroup",symbols:[i.tagSelectorTokenizer.has("groupOpen")?{type:"groupOpen"}:groupOpen,"occurGroupInner",i.tagSelectorTokenizer.has("groupClose")?{type:"groupClose"}:groupClose],postprocess:function(e){var t=n(e,2)[1];return function(e){return t.reduce((function(t,r){return r||t(e)}),!1)}}},{name:"occurGroupInner$ebnf$1",symbols:[]},{name:"occurGroupInner$ebnf$1$subexpression$1",symbols:[i.tagSelectorTokenizer.has("groupAlternative")?{type:"groupAlternative"}:groupAlternative,"numGroupPredicate"]},{name:"occurGroupInner$ebnf$1",symbols:["occurGroupInner$ebnf$1","occurGroupInner$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"occurGroupInner",symbols:["numGroupPredicate","occurGroupInner$ebnf$1"],postprocess:function(e){var t=n(e,2),r=t[0],i=t[1];return o([r],i.map((function(e){return n(e,2)[1]})))}}],ParserStart:"start"};t.default=a},7915:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTagSelector=void 0;var n=r(9654),o=r(2958),i=n.Grammar.fromCompiled(o.default);t.parseTagSelector=function(e){var t=new n.Parser(i);try{var r=t.feed(e).results;return r.length,r[0]}catch(e){return function(){return!1}}}},4207:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagSelectorTokenizer=void 0;var n=r(9271);t.tagSelectorTokenizer=n.compile({text:{match:/[a-zA-Z_]+/u},numDigits:{match:/\d+(?=:|$)/u},digits:{match:/\d+/u},slash:{match:"/"},escapeseq:{match:/%\w/u},multiplierSeq:{match:/\*n\+/u},allStar:{match:/^\*$/u},numStar:{match:/\*(?=:|$)/u},star:{match:"*"},groupOpen:{match:"{"},groupAlternative:{match:","},rangeSpecifier:{match:/-/u},numGroupClose:{match:/\}(?=:|$)/u},groupClose:{match:"}"},occurSep:{match:":"}})},2147:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Template=void 0;var o=r(9375),i=r(5887),u=function(){function Template(e,t){this.textFragments=e,this.parser=new i.Parser,this.nodes=null!=t?t:this.parser.parse(e)}return Template.make=function(e){return new Template([e],null)},Template.makeFromFragments=function(e){return new Template(e,null)},Template.prototype.render=function(e,t){for(var r=this,i={template:this,parser:this.parser},u=this.nodes,a=!1,_loop_1=function(t){var n={iteration:t},s=e.makeAccessor(i,n);u=u.flatMap((function(e,t){return e.evaluate(r.parser,s,[t])})),a=u.reduce(o.nodesAreReady,!0),e.finishIteration(i,n)},s=0;s<50&&!a;s++)_loop_1(s);var c=function(e){var t,r,o=[];if(0===e.length)return o;var i="";try{for(var u=n(e),a=u.next();!a.done;a=u.next()){var s=a.value.toString();"string"==typeof s?i+=s:(o.push(i),i="")}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return o.push(i),o}(u);return t&&t(c),e.finishRun(i,{result:c}),c},Template}();t.Template=u},9375:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.DocSeparatorNode=t.TextNode=t.TagNode=t.nodesAreReady=void 0;var i=r(7850),u=r(2157),a=r(2496);t.nodesAreReady=function(e,t){return e&&t.isReady()};var s=function(){function TagNode(e,t,r,n,o,i){this._separators=[],this.fullKey=e,this.key=t,this.num=r,this.fullOccur=n,this.occur=o,this.innerNodes=i}return Object.defineProperty(TagNode.prototype,"representation",{get:function(){return this.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(TagNode.prototype,"valuesText",{get:function(){return this.innerNodes.map((function(e){return e.toString()})).join("")},enumerable:!1,configurable:!0}),Object.defineProperty(TagNode.prototype,"values",{get:function(){return u.splitValues(this.valuesText,this._separators)},enumerable:!1,configurable:!0}),Object.defineProperty(TagNode.prototype,"separators",{set:function(e){this._separators=e.map(u.weakSeparatorToSeparator)},enumerable:!1,configurable:!0}),Object.defineProperty(TagNode.prototype,"separator",{get:function(){return this.separators},enumerable:!1,configurable:!0}),TagNode.prototype.toString=function(){return""+i.TAG_OPEN+this.fullKey+i.ARG_SEP+this.valuesText+i.TAG_CLOSE},TagNode.prototype.isReady=function(){return!1},TagNode.prototype.evaluate=function(e,r,n){var i,u=r(this.key),s=n.length-1,l=u.getOptions().capture,innerEvaluate=function(t,i){return t.evaluate(e,r,o(n,[i]))};l||(i=this.innerNodes).splice.apply(i,o([0,this.innerNodes.length],this.innerNodes.flatMap(innerEvaluate)));var p=this.innerNodes.reduce(t.nodesAreReady,!0);this.separators=u.getOptions().separators;var f={path:n,depth:s,ready:p,capture:l},d=u.execute(this,f);switch(d.status){case a.Status.NotReady:return[this];case a.Status.Ready:return[new c(d.result)];case a.Status.ContainsTags:return e.rawParse(d.result);case a.Status.ContinueTags:return e.rawParse(d.result).flatMap(innerEvaluate)}},TagNode}();t.TagNode=s;var c=function(){function TextNode(e){this.text=e}return TextNode.prototype.toString=function(){return this.text},TextNode.prototype.isReady=function(){return!0},TextNode.prototype.evaluate=function(){return[this]},TextNode}();t.TextNode=c;var l=function(){function DocSeparatorNode(){}return DocSeparatorNode.prototype.toString=function(){return null},DocSeparatorNode.prototype.isReady=function(){return!0},DocSeparatorNode.prototype.evaluate=function(){return[this]},DocSeparatorNode}();t.DocSeparatorNode=l},5223:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};function id(e){return e[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.tagBuilder=void 0;var o=r(9375),i=r(4766),u=r(4549);t.tagBuilder=new u.TagBuilder;var a={Lexer:i.templateTokenizer,ParserRules:[{name:"start",symbols:["content"],postprocess:id},{name:"content$ebnf$1",symbols:[]},{name:"content$ebnf$1",symbols:["content$ebnf$1","node"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"content",symbols:["content$ebnf$1"],postprocess:id},{name:"node",symbols:["text"],postprocess:id},{name:"node",symbols:["tag"],postprocess:id},{name:"text",symbols:[i.templateTokenizer.has("text")?{type:"text"}:text],postprocess:function(e){var t=n(e,1)[0];return new o.TextNode(t.value)}},{name:"tag",symbols:[i.templateTokenizer.has("tagopen")?{type:"tagopen"}:tagopen,i.templateTokenizer.has("keyname")?{type:"keyname"}:keyname,"inner",i.templateTokenizer.has("tagclose")?{type:"tagclose"}:tagclose],postprocess:function(e){var r=n(e,3),o=r[1],i=r[2];return t.tagBuilder.build(o.value,i)}},{name:"inner$ebnf$1$subexpression$1",symbols:[i.templateTokenizer.has("sep")?{type:"sep"}:sep,"content"]},{name:"inner$ebnf$1",symbols:["inner$ebnf$1$subexpression$1"],postprocess:id},{name:"inner$ebnf$1",symbols:[],postprocess:function(){return null}},{name:"inner",symbols:["inner$ebnf$1"],postprocess:function(e){var t=n(e,1)[0];return t?t[1]:[]}}],ParserStart:"start"};t.default=a},5887:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=t.BaseDepth=void 0;var i=r(9654),u=r(5223),a=r(9375),s=r(7850),c=r(5223),l=i.Grammar.fromCompiled(u.default),mainParse=function(e){var t=function(e){var t=new i.Parser(l);try{return t.feed(e).results}catch(t){return[[new a.TextNode(e)]]}}(e);return t.length,t[0]};!function(e){e[e.Single=1]="Single",e[e.Fragments=2]="Fragments"}(t.BaseDepth||(t.BaseDepth={}));var p=function(){function Parser(){this.tagBuilderSettings=[new Map,new Map]}return Parser.prototype.parse=function(e){return c.tagBuilder.push(this.tagBuilderSettings),t=e,o(s.intersperse2d(t.map(mainParse),new a.DocSeparatorNode));var t},Parser.prototype.rawParse=function(e){return c.tagBuilder.push(this.tagBuilderSettings),mainParse(e)},Parser}();t.Parser=p},4549:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.TagBuilder=t.keySeparationPattern=void 0;var o=r(9375);t.keySeparationPattern=/^((?:[a-zA-Z_/]|%\w)+)(\d*)$/u;var getAndInc=function(e,t){var r,n=(null!==(r=e.get(t))&&void 0!==r?r:-1)+1;return e.set(t,n),n},i=function(){function TagBuilder(){this.tagCounter=null,this.tagCounterFull=null}return TagBuilder.prototype.increment=function(e,t){return[getAndInc(this.tagCounterFull,e),getAndInc(this.tagCounter,t)]},TagBuilder.prototype.build=function(e,r){var i=e.match(t.keySeparationPattern);if(!i)throw new Error("Could not match key. This should never happen.");var u=i[1],a=0===i[2].length?null:Number(i[2]),s=n(this.increment(e,u),2),c=s[0],l=s[1];return new o.TagNode(e,u,a,c,l,r)},TagBuilder.prototype.push=function(e){this.tagCounterFull=e[0],this.tagCounter=e[1]},TagBuilder}();t.TagBuilder=i},4766:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.templateTokenizer=t.keyPattern=void 0;var n=r(9271),o=r(7850);t.keyPattern=/(?:[a-zA-Z_/]|%\w)+\d*/u;t.templateTokenizer=n.states({main:{tagopen:{match:o.TAG_OPEN,push:"key"},text:{match:/[\s\S]+?(?=\[\[|$)/u,lineBreaks:!0}},key:{keyname:{match:t.keyPattern},sep:{match:o.ARG_SEP,next:"intag"},tagclose:{match:o.TAG_CLOSE,pop:1}},intag:{tagopen:{match:o.TAG_OPEN,push:"key"},tagclose:{match:o.TAG_CLOSE,pop:1},text:{match:/[\s\S]+?(?=\[\[|\]\])/u,lineBreaks:!0}}})},2157:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.weakSeparatorToSeparator=t.splitValues=void 0,t.splitValues=function splitValues(e,t){if(0===t.length)return e;for(var n=r(t),o=n[0],i=o.sep,u=o.max,a=o.trim,s=o.keepEmpty,c=n.slice(1),l=[],p=e,f=!1;!f;){var d=p.indexOf(i),h=r(d<0||l.length+1===u?[p,"",!0]:[p.slice(0,d),p.slice(d+i.length),!1],3),y=h[0],v=h[1],m=h[2],g=a?y.trim():y;(s||g.length>=1)&&l.push(g),p=v,f=m}return l.map((function(e){return splitValues(e,c)}))},t.weakSeparatorToSeparator=function(e){var t,r,n,o;return"string"==typeof e?{sep:e,max:1/0,trim:!1,keepEmpty:!0}:{sep:null!==(t=e.sep)&&void 0!==t?t:"::",max:null!==(r=e.max)&&void 0!==r?r:1/0,trim:null!==(n=e.trim)&&void 0!==n&&n,keepEmpty:null===(o=e.keepEmpty)||void 0===o||o}}},2496:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Status=void 0,function(e){e[e.Ready=0]="Ready",e[e.NotReady=1]="NotReady",e[e.ContainsTags=2]="ContainsTags",e[e.ContinueTags=3]="ContinueTags"}(t.Status||(t.Status={}))},7850:function(e,t){"use strict";var r=this&&this.__generator||function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.intersperse2d=t.ARG_SEP=t.TAG_CLOSE=t.TAG_OPEN=void 0,t.TAG_OPEN="[[",t.TAG_CLOSE="]]",t.ARG_SEP="::",t.intersperse2d=function intersperse2d(e,t){var o,i,u,a,s,c,l,p,f,d,h,y;return r(this,(function(r){switch(r.label){case 0:o=!0,r.label=1;case 1:r.trys.push([1,14,15,16]),i=n(e),u=i.next(),r.label=2;case 2:return u.done?[3,13]:(a=u.value,o?(o=!1,[3,5]):[3,3]);case 3:return[4,t];case 4:r.sent(),r.label=5;case 5:r.trys.push([5,10,11,12]),h=void 0,s=n(a),c=s.next(),r.label=6;case 6:return c.done?[3,9]:[4,c.value];case 7:r.sent(),r.label=8;case 8:return c=s.next(),[3,6];case 9:return[3,12];case 10:return l=r.sent(),h={error:l},[3,12];case 11:try{c&&!c.done&&(y=s.return)&&y.call(s)}finally{if(h)throw h.error}return[7];case 12:return u=i.next(),[3,2];case 13:return[3,16];case 14:return p=r.sent(),f={error:p},[3,16];case 15:try{u&&!u.done&&(d=i.return)&&d.call(i)}finally{if(f)throw f.error}return[7];case 16:return[2]}}))}},8412:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.prereleaseInfo=t.versionInfo=void 0,t.versionInfo=[0,1,2],t.prereleaseInfo=[],t.version="v"+t.versionInfo.join(".")+(t.prereleaseInfo.length>0?"-"+t.prereleaseInfo.join("."):"")}},t={};return function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.exports}(8492)})();