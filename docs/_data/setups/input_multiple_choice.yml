name: Multiple choice with input
code: |
  const countRightAnswers = (tag, internals) => {
    const rightAnswerKeyword = `${tag.fullKey}:rightAnswers`
    const increaseByRightAnswers = (v) => v + (tag.values
      ? tag.values[0].length
      : 0)

    return tag.values
      ? tag.values.flatMap((v, i) => v.map((w) => [
        w,
        i,
        tag.fullKey,
        tag.fullOccur,
        internals.cache,
      ]))
      : []
  }

  const front = new Closet.Stylizer({
      separator: '<br />',
      mapper: (value, index, _t, fullKey, fullOccur, cache) => {
        const rightAnswerKeyword = `${fullKey}:rightAnswers`
        const rightAnswerCount = cache.get(rightAnswerKeyword, 0)
        const inputType = rightAnswerCount === 1 ? 'radio' : 'checkbox'

        return `
          <input type="${inputType}" id="${fullKey}-${fullOccur}-${index}" name="${fullKey}" />
          <label for="${fullKey}-${fullOccur}-${index}">${value}</label>
        `
      },
  })


  filterManager.addRecipe(Closet.recipes.multipleChoiceShow({
    tagname: 'mc',
    getValues: countRightAnswers,
    frontStylizer: front,
  }))
